(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["unifyOrder"],{"08d9":function(t,e,i){},"0b26":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("van-tag",{staticClass:"state-class",attrs:{type:t.tagType,size:"large",plain:""}},[t._v(t._s(t.billStateText))])},n=[],a=(i("c5f6"),{name:"stateTag",props:{billState:Number,reCheckState:Number},computed:{billStateText:function(){var t="";switch(this.billState){case 0:t="未审核";break;case 1:t=1===this.reCheckState?"已复审":"已审核";break}return t},tagType:function(){var t="";switch(this.billState){case 0:t="danger";break;case 1:t="success";break}return t}}}),l=a,s=(i("eb87"),i("2877")),c=Object(s["a"])(l,o,n,!1,null,"935c03cc",null);e["a"]=c.exports},"0f38":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("van-checkbox",{directives:[{name:"show",rawName:"v-show",value:t.visibleFlag,expression:"visibleFlag"}],staticClass:"order-checkbox",on:{click:t.onCheckboxClick},scopedSlots:t._u([{key:"icon",fn:function(e){return i("img",{staticClass:"checked-box-icon",attrs:{src:e.checked?t.checkedIcon.active:t.checkedIcon.normal}})}}]),model:{value:t.$attrs.checked,callback:function(e){t.$set(t.$attrs,"checked",e)},expression:"$attrs.checked"}})},n=[],a={name:"checkBox",props:{visibleFlag:{type:Boolean,default:!1}},data:function(){return{checkedIcon:{normal:i("41c0"),active:i("f3c0")}}},methods:{onCheckboxClick:function(){this.$emit("on-checkbox-click")}}},l=a,s=(i("dab9"),i("2877")),c=Object(s["a"])(l,o,n,!1,null,"4e0c8b3e",null);e["a"]=c.exports},"32a8":function(t,e,i){"use strict";var o=i("7fa4"),n=i.n(o);n.a},4102:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"order-empty"},[o("img",{staticClass:"empty-icon",attrs:{src:i("6ee7")}}),o("div",{staticClass:"empty-text"},[t._v(t._s(t.message))])])},n=[],a={name:"emptyBill",props:{message:{type:String,default:"暂无可查看的订单"}}},l=a,s=(i("faf1"),i("2877")),c=Object(s["a"])(l,o,n,!1,null,"3c6ad708",null);e["a"]=c.exports},"41c0":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjU5MzM3ODc2REY1QzExRTlBNjU4QkY2NDE0MTBEMjAzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjU5MzM3ODc3REY1QzExRTlBNjU4QkY2NDE0MTBEMjAzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTkzMzc4NzRERjVDMTFFOUE2NThCRjY0MTQxMEQyMDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NTkzMzc4NzVERjVDMTFFOUE2NThCRjY0MTQxMEQyMDMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6ky6P/AAACeElEQVR42sSXTW8SURSGLwNhAZLQBAhb09K6Vxd+xpWJNboxqRub9meoP0D7M5roRl36lW6tsQvtvkobd4QASUkYWPDp+07OkENtYabD1ZO8cyHMvM+9d+695xAbjUbmf0QiyE3lcjmG5hZ0H7oBLUEL8vMxdAh9gz5Au6VSaeZoYtNGDKCDZhN6JrAgwU68hLbRgWFoMKAX0byBrnpTk0iYTCZjUqmUSSaTJh6PGz7b7/c9dTod47qu6fV6vsV36DHgvwODAb2D5h2UIzCXy3nQINFqtUyj0fA6g2hAjwD/MhMM6F0076FkOp02xWLROI4TauEMh0NTrVZNu93m1y70EPCdM8GArsgUZbLZrMnn85FWbr1eN81mkx9d6ArgP/3fHAWNo3lFKKc1KpRBD3lFF+gtjEkwYoMLie+0UCjMbb/Si56ySDcnwLJPuWW8hRT2nU4LetFT4qmwxiO+zX3qb5l5Bz1l1EvCGoNX/RtshfJe1eDrvPBwsBXK+5oGl3jhiWQrlPeyBnsHPo9BW6G8F05up38ajkptZjAYWAMp72MNLnuHardrDay8f2nwHi9MbbZCee9p8Ec/pdkK5f1Jg5kvD5lDbcDpKfmZ1cnuGCw10paXuZHEmU/nFfSip8SWXw7p7bQN/WDParXa3MD0ktHuC2MyLaInXO/rTNqcGibxqEEPeXUsBJ4I4698TPgBmjWuflYOlUrlXNPOZ/isVB/cR2viPbPYu4fmLSuHiMWeK9DPYcrbS2heQ5fPKm/9E4mHwynl7b5M70GUgv45tBhwpo+gF+cu6E/pwE3ogeTuxRN/YY7kLwzL4q/TgKHANuKPAAMAun8rS4SUYuAAAAAASUVORK5CYII="},"461a":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"inteledi-unifyOrder"},[i("w-header",{attrs:{title:"统配入库单",border:!0}},[i("headEditBtn",{directives:[{name:"show",rawName:"v-show",value:t.$fxAuth("distributionInBill.check"),expression:"$fxAuth('distributionInBill.check')"}],attrs:{slot:"header-right",active:t.billEditFlag},on:{click:t.onBillEditClick},slot:"header-right"}),i("headSearchBtn",{directives:[{name:"show",rawName:"v-show",value:!t.billEditFlag,expression:"!billEditFlag"}],attrs:{slot:"header-right"},on:{click:t.onSearchClick},slot:"header-right"}),i("headSelectAllBtn",{directives:[{name:"show",rawName:"v-show",value:t.billEditFlag,expression:"billEditFlag"}],attrs:{slot:"header-right",active:t.isSelectAll},on:{click:t.onSelectAllClick},slot:"header-right"})],1),i("filterTab",{attrs:{state:t.filterState,differenceFlag:t.filterDifference},on:{"on-state-click":t.billStateClick,"on-differenceFlag-click":t.differenceFlagClick}}),t.$fxAuth("distributionInBill.checkAndAccept")&&t.$fxSysAuth("distributionInBill.SysOpenAcceptGroup")?i("div",{staticClass:"bill-btn"},[i("van-button",{staticClass:"add-btn fx-no-radius",attrs:{type:"primary",plain:"",size:"small"},on:{click:t.onCompleteClick}},[t._v("验收")])],1):t._e(),i("div",{staticClass:"bill-content"},[i("van-pull-refresh",{directives:[{name:"show",rawName:"v-show",value:0!==t.billList.length,expression:"billList.length !== 0"}],staticClass:"billList-list",on:{refresh:t.onPullRefresh},model:{value:t.pullRefreshLoading,callback:function(e){t.pullRefreshLoading=e},expression:"pullRefreshLoading"}},[i("van-list",{attrs:{finished:t.loadFinished,"finished-text":"没有更多了",error:t.listError,"error-text":"请求失败，点击重新加载"},on:{"update:error":function(e){t.listError=e},load:t.onLoadMore},model:{value:t.listLoading,callback:function(e){t.listLoading=e},expression:"listLoading"}},t._l(t.billList,function(e){return i("billBlock",{directives:[{name:"show",rawName:"v-show",value:t.computedShowOrder(e.billState,e.weightState),expression:"computedShowOrder(item.billState, item.weightState)"}],key:e.id,attrs:{data:e,showCheckBox:t.billEditFlag},on:{"on-click":function(i){return t.onClickList(e)}}})}),1)],1),i("emptyBill",{directives:[{name:"show",rawName:"v-show",value:0===t.billList.length,expression:"billList.length === 0"}]})],1),i("div",{staticClass:"bill-bottom"},[i("van-button",{directives:[{name:"show",rawName:"v-show",value:t.billEditFlag,expression:"billEditFlag"}],staticClass:"add-btn fx-no-radius",attrs:{type:"primary"},on:{click:t.onExpressClick}},[t._v("批量审核")])],1),i("van-actionsheet",{attrs:{actions:t.billStateActions,"cancel-text":"取消"},on:{select:t.onBillStateAction},model:{value:t.billStateActionShow,callback:function(e){t.billStateActionShow=e},expression:"billStateActionShow"}}),i("van-actionsheet",{attrs:{actions:t.differenceFlagActions,"cancel-text":"取消"},on:{select:t.onDifferenceFlagAction},model:{value:t.differenceFlagActionShow,callback:function(e){t.differenceFlagActionShow=e},expression:"differenceFlagActionShow"}}),i("van-popup",{staticClass:"fx-list-popup-full",attrs:{position:"right","lock-scroll":!1,"close-on-click-overlay":!1},model:{value:t.filterPopShow,callback:function(e){t.filterPopShow=e},expression:"filterPopShow"}},[i("filterPop",{attrs:{visibleFlag:t.filterPopShow,filterParams:t.filterParams},on:{"update:visibleFlag":function(e){t.filterPopShow=e},"update:visible-flag":function(e){t.filterPopShow=e},"update:filterParams":function(e){t.filterParams=e},"update:filter-params":function(e){t.filterParams=e},"on-confirm":t.onFilterConfirm}})],1),i("van-popup",{staticClass:"fx-list-popup-full",attrs:{position:"right","close-on-click-overlay":!1,"lock-scroll":!1},model:{value:t.itemCompletePopShow,callback:function(e){t.itemCompletePopShow=e},expression:"itemCompletePopShow"}},[i("itemCompletePop",{attrs:{visibleFlag:t.itemCompletePopShow,data:t.completeItem,title:"统配入库单验收",searchKeywords:"code,name,pinYin",getCheckList:t.getCheckList,completeHandle:t.completeHandle,isDisabled:!t.$fxAuth("distributionInBill.save")},on:{"update:visibleFlag":function(e){t.itemCompletePopShow=e},"update:visible-flag":function(e){t.itemCompletePopShow=e}}})],1)],1)},n=[],a=i("f499"),l=i.n(a),s=(i("ac6a"),i("75fc")),c=i("5176"),r=i.n(c),d=i("795b"),h=i.n(d),u=(i("7514"),i("7f7f"),i("cebc")),p=(i("6762"),i("2f62")),f=i("b215"),b=i("46aa"),g=i("a0be"),m=i("4102"),v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order-block fx-shadow-block",style:t.orderBlockStyle,on:{click:t.onClick}},[i("div",{staticClass:"block-title"},[i("i",{staticClass:"block-icon"}),i("span",{staticClass:"title-text"},[t._v(t._s(t.data.rdcDTO.name))]),i("stateTag",{attrs:{billState:t.data.billState}}),i("span",{directives:[{name:"show",rawName:"v-show",value:t.data.difference,expression:"data.difference"}],staticClass:"difference-span"},[t._v("有差异")])],1),i("div",{staticClass:"block-value"},[i("div",{staticClass:"order-No"},[t._v(t._s(t.data.shopDTO.name))]),i("div",{staticClass:"order-date"},[i("span",[t._v("业务日期：")]),i("span",[t._v(t._s(t._f("filterDateYMD")(t.data.businessDate)))]),i("van-icon",{staticClass:"order-date-arrow",attrs:{name:"arrow"}})],1)]),i("div",{staticClass:"block-value"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.$fxAuth("distributionInBill.seewithtaxmoney"),expression:"$fxAuth('distributionInBill.seewithtaxmoney')"}],staticClass:"order-No fx-price-font"},[i("span",[t._v("含税金额：")]),i("span",[t._v("￥"+t._s(t.toFixedNumberSize(t.data.taxMoney)))])]),i("div",{staticClass:"order-date"},[i("span",[t._v("到货日期：")]),i("span",[t._v(t._s(t._f("filterDateYMD")(t.data.arriveDate)))]),i("van-icon",{staticClass:"order-date-arrow",attrs:{name:"arrow"}})],1)]),i("div",[t.data.houseName?[i("span",[t._v("入库仓库:")]),i("span",{staticClass:"order-warehouse"},[t._v(t._s(t.data.houseName))])]:t._e()],2),i("checkBox",{staticClass:"order-checkbox",attrs:{visibleFlag:t.showCheckBox,checked:t.data.checked}})],1)},S=[],k=i("59ad"),w=i.n(k),C=i("0f38"),L=i("0b26"),A={name:"orderBlock",components:{checkBox:C["a"],stateTag:L["a"]},props:{data:{type:Object,default:function(){return{}}},showCheckBox:{type:Boolean,default:!1}},computed:Object(u["a"])({},Object(p["c"])({sysPointSize:"sysPointSize"}),{orderBlockStyle:function(){var t=this.showCheckBox?"50px":"15px";return{paddingLeft:t}},toFixedNumberSize:function(t){var e=this;return function(t){return w()(e.$fxUtils.toFixedSHW(t,e.sysPointSize))}}}),methods:{onClick:function(){this.showCheckBox?this.$set(this.data,"checked",!this.data.checked):this.$emit("on-click",this.data)}}},x=A,y=(i("32a8"),i("2877")),D=Object(y["a"])(x,v,S,!1,null,"c52fcc80",null),F=D.exports,P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"filter-popup"},[i("w-header",{attrs:{title:"筛选条件",leftOptions:t.leftOptions},on:{"on-click-back":t.onCloseClick}}),i("div",{ref:"filterContent",staticClass:"filter-content"},[i("van-cell-group",[i("van-cell",{attrs:{title:"业务日期"}}),i("van-cell",{attrs:{title:"起始时间",value:t.beginDate,"is-link":""},on:{click:t.onBeginDateClick}}),i("van-cell",{attrs:{title:"结束时间",value:t.endDate,"is-link":""},on:{click:t.endDateClick}}),i("van-cell",{attrs:{title:"配送中心",value:t.rdc.name,"value-class":"info-item-value","is-link":""},on:{click:t.onRdcClick}}),i("van-cell",{attrs:{title:"门店",value:t.shop.name,"value-class":"info-item-value","is-link":""},on:{click:t.onShopClick}}),i("van-cell",{attrs:{title:"仓库",value:t.house.name,"value-class":"info-item-value","is-link":""},on:{click:t.onHouseClick}}),i("van-cell",{attrs:{title:"品项",value:t.goods.name,"value-class":"info-item-value","is-link":""},on:{click:t.onGoodsClick}}),i("van-cell",{attrs:{title:"单据类型",value:t.billType.name,"value-class":"info-item-value"},on:{click:t.onBillTypeClick}},[i("van-icon",{staticClass:"item-clear-btn",attrs:{slot:"right-icon",name:t.billType.id?"close":"arrow"},on:{click:function(e){e.stopPropagation(),t.billType.id?t.onBillTypeClearClick:t.onBillTypeClick()}},slot:"right-icon"})],1),i("van-field",{ref:"billNo",attrs:{label:"系统单号","value-class":"info-item-value",placeholder:"请输入系统单号","input-align":"right"},on:{focus:function(e){return t.onFocus("billNo")}},model:{value:t.billNo,callback:function(e){t.billNo=e},expression:"billNo"}})],1)],1),i("div",{staticClass:"filter-bottom"},[i("van-button",{staticClass:"reset-btn fx-no-radius",attrs:{type:"info"},on:{click:t.onResetClick}},[t._v("重置")]),i("van-button",{staticClass:"confirm-btn fx-no-radius",attrs:{type:"primary"},on:{click:t.onConfirmClick}},[t._v("确定")])],1),i("van-popup",{attrs:{position:"bottom"},model:{value:t.datePickerShow,callback:function(e){t.datePickerShow=e},expression:"datePickerShow"}},[i("w-date-picker",{attrs:{visibleFlag:t.datePickerShow,currentDate:t.currentDate},on:{"update:visibleFlag":function(e){t.datePickerShow=e},"update:visible-flag":function(e){t.datePickerShow=e},confirm:t.dateConfirmhandle}})],1),i("filterListPopup",{attrs:{title:"配送中心检索",rollingLoad:!0,getDataApi:t.getRdcListData},on:{"on-select":function(e){return t.selectRdc(arguments)}},model:{value:t.rdcPopShow,callback:function(e){t.rdcPopShow=e},expression:"rdcPopShow"}}),i("filterListPopup",{attrs:{title:"门店检索",rollingLoad:!0,getDataApi:t.getShopListData},on:{"on-select":function(e){return t.selectShop(arguments)}},model:{value:t.shopPopShow,callback:function(e){t.shopPopShow=e},expression:"shopPopShow"}}),i("van-popup",{staticClass:"fx-list-popup-300",attrs:{position:"right"},model:{value:t.housePopShow,callback:function(e){t.housePopShow=e},expression:"housePopShow"}},[i("listComp",{attrs:{visibleFlag:t.housePopShow,data:t.houseList,title:"仓库检索",loadFinished:!0},on:{"update:visibleFlag":function(e){t.housePopShow=e},"update:visible-flag":function(e){t.housePopShow=e},"on-select":t.selectHouse,"on-search":t.searchHouse}})],1),i("van-popup",{staticClass:"fx-list-popup-300",attrs:{position:"right"},model:{value:t.goodsPopShow,callback:function(e){t.goodsPopShow=e},expression:"goodsPopShow"}},[i("listComp",{attrs:{visibleFlag:t.goodsPopShow,data:t.goodsList,title:"品项检索",loading:t.goodsLoading,loadFinished:t.goodsLoadFinished},on:{"update:visibleFlag":function(e){t.goodsPopShow=e},"update:visible-flag":function(e){t.goodsPopShow=e},"update:loading":function(e){t.goodsLoading=e},"on-select":t.selectGoods,"on-search":t.searchGoods,"on-load":t.loadGoodsList}})],1),i("van-popup",{staticClass:"fx-list-popup-300",attrs:{position:"right"},model:{value:t.billTypePopShow,callback:function(e){t.billTypePopShow=e},expression:"billTypePopShow"}},[i("listComp",{attrs:{visibleFlag:t.billTypePopShow,data:t.billTypeList,title:"单据类型检索",loadFinished:!0},on:{"update:visibleFlag":function(e){t.billTypePopShow=e},"update:visible-flag":function(e){t.billTypePopShow=e},"on-select":t.selectBillType,"on-search":t.searchBillType}})],1)],1)},B=[],I=i("768b"),E=i("f6bb"),T=i("eb03"),N=50,R={name:"FilterPop",components:{listComp:E["a"],filterListPopup:T["a"]},props:{visibleFlag:Boolean,filterParams:{type:Object,default:function(){return{}}}},data:function(){return{leftOptions:{showBackBtn:!0,preventGoBack:!0},currentDate:new Date,datePickerShow:!1,beginDate:this.$fxCommon.orderFilterStartDate(),endDate:this.$fxCommon.orderFilterEndDate(),rdc:{name:"请选择"},rdcList:[],rdcPopShow:!1,shop:{name:"请选择"},shopPopShow:!1,house:{name:"请选择"},houseList:[],housePopShow:!1,goods:{name:"请选择"},goodsListStart:0,goodsList:[],goodsLoading:!1,goodsLoadFinished:!1,goodsPopShow:!1,searchGoodsKeyword:"",billType:{name:"请选择"},billTypeList:[],billTypePopShow:!1,billNo:""}},watch:{visibleFlag:{handler:function(t){t&&this.$fxUtils.isEmptyObjSHW(this.filterParams)&&this.resetHandler()},immediate:!0}},computed:Object(u["a"])({},Object(p["c"])({loginerShopId:function(t){return t.loginer.loginerShopId},loginerId:function(t){return t.loginer.loginerId}})),methods:{onCloseClick:function(){this.$emit("update:visibleFlag",!1)},onBeginDateClick:function(){this.datePickerShow=!0,this.beginDate&&(this.currentDate=new Date(this.beginDate)),this.dateType="begin"},endDateClick:function(){this.datePickerShow=!0,this.endDate&&(this.currentDate=new Date(this.endDate)),this.dateType="end"},dateConfirmhandle:function(t){"begin"===this.dateType?(this.beginDate=this.$fxUtils.setDateTime(t,"时分"),this.endDate&&this.$fxCommon.orderFilterRangeDate(this.beginDate,this.endDate)||(this.endDate=this.$fxCommon.orderFilterDate(t))):(this.endDate=this.$fxUtils.setDateTime(t,"时分"),this.beginDate&&this.$fxCommon.orderFilterRangeDate(this.beginDate,this.endDate)||(this.beginDate=this.$fxCommon.orderFilterStartDate(t))),this.datePickerShow=!1},onRdcClick:function(){this.rdcPopShow=!0},selectRdc:function(t){var e=Object(I["a"])(t,1),i=e[0];this.rdc=i},getRdcListData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,o={keyword:t,start:e,size:i,orgFlag:1};return this.$fxApi("z5common.getUserManageShop")({data:o}).then(function(t){return t.shops})},onShopClick:function(){this.shopPopShow=!0},selectShop:function(t){var e=Object(I["a"])(t,1),i=e[0];this.shop=i},getShopListData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,o={keyword:t,start:e,size:i,orgFlag:0};return this.$fxApi("z5common.getUserManageShop")({data:o}).then(function(t){return t.shops})},onHouseClick:function(){var t=this;if(!this.shop.id)return this.$fxToast.fail("请先选择门店!"),!1;this.getHouseListData().then(function(e){t.houseList=e.shops,t.housePopShow=!0})},selectHouse:function(t){this.house=t},searchHouse:function(t){var e=this;this.getHouseListData(t).then(function(t){e.houseList=t.shops})},getHouseListData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new h.a(function(i){var o={keyword:e};t.$fxHttp.requestGet({url:"".concat(t.$fxBaseApi.url,"/accounts/").concat(t.shop.id,"/users/").concat(t.loginerId,"/houses"),data:o}).then(function(t){i(t)})})},onGoodsClick:function(){var t=this;this.goodsListStart=0,this.searchGoodsKeyword="",this.getGoodsListData().then(function(e){t.goodsLoading=!1,t.goodsPopShow=!0,t.goodsList=e.goods})},selectGoods:function(t){this.goods=t},searchGoods:function(t){var e=this;this.goodsListStart=0,this.searchGoodsKeyword=t,this.getGoodsListData(t).then(function(t){t.goods.length<N&&(e.goodsLoadFinished=!0),e.goodsList=t.goods})},loadGoodsList:function(){var t=this;!0!==this.goodsLoadFinished&&(this.goodsListStart=this.goodsListStart+N,this.getGoodsListData(this.searchGoodsKeyword).then(function(e){var i;t.goodsLoading=!1,e.goods.length<N&&(t.goodsLoadFinished=!0),(i=t.goodsList).push.apply(i,Object(s["a"])(e.goods))}))},getGoodsListData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new h.a(function(i){var o={start:t.goodsListStart,size:N,paged:!0,m:"list4ShopOrderBill",keyword:e};t.$fxHttp.requestGet({url:"".concat(t.$fxBaseApi.url,"/accounts/").concat(t.loginerShopId,"/users/").concat(t.loginerId,"/goods"),data:o}).then(function(t){i(t)})})},onBillTypeClick:function(){var t=this;this.getBillTypeListData().then(function(e){t.billTypeList=e.businessTypes,t.billTypePopShow=!0})},selectBillType:function(t){this.billType=t},searchBillType:function(t){var e=this;this.getBillTypeListData(t).then(function(t){e.billTypeList=t.businessTypes})},getBillTypeListData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new h.a(function(i){var o={m:"list4ShopOrderBill",keyword:e};t.$fxHttp.requestGet({url:"".concat(t.$fxBaseApi.url,"/accounts/").concat(t.loginerShopId,"/users/").concat(t.loginerId,"/businessTypes"),data:o}).then(function(t){i(t)})})},onResetClick:function(){this.resetHandler()},resetHandler:function(){this.beginDate=this.$fxCommon.orderFilterStartDate(),this.endDate=this.$fxCommon.orderFilterEndDate(),this.rdc={name:"请选择"},this.shop={name:"请选择"},this.house={name:"请选择"},this.billType={name:"请选择"},this.goods={name:"请选择"}},onConfirmClick:function(){this.$emit("update:visibleFlag",!1),this.$emit("update:filterParams",this.getFilterParams()),this.$emit("on-confirm",this.getFilterParams())},getFilterParams:function(){return{beginDate:this.beginDate||this.$fxCommon.orderFilterStartDate(),endDate:this.endDate||this.$fxCommon.orderFilterEndDate(),rdc:this.rdc,shop:this.shop,house:this.house,billType:this.billType,goods:this.goods,billNo:this.billNo}},onFocus:function(t){this.onScrollTop(t)},onScrollTop:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,i=this.$refs[t];if(!i||0===i.length)return!1;var o=i.$el.offsetTop,n=this.$refs["filterContent"];this.$fxUtils.scrollTopW({offsetTop:o,$el:n,distance:e})},onBillTypeClearClick:function(){this.billType={name:"请选择",id:""}}}},j=R,M=(i("d4ad"),Object(y["a"])(j,P,B,!1,null,"dcdc1062",null)),O=M.exports,G=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shopOrder-filter fx-shadow-down"},[i("div",{staticClass:"filter-state",on:{click:t.onStateClick}},[i("span",[t._v("审核状态")]),i("van-icon",{staticClass:"filter-arrow",attrs:{name:"arrow-down"}}),i("span",[t._v(t._s(t.state))])],1),i("div",{staticClass:"filter-differenceFlag",on:{click:t.onDifferenceFlagClick}},[i("span",[t._v("差异状态")]),i("van-icon",{staticClass:"filter-arrow",attrs:{name:"arrow-down"}}),i("span",[t._v(t._s(t.differenceFlag))])],1)])},H=[],Y={name:"filterTab",props:{state:String,differenceFlag:String},methods:{onStateClick:function(){this.$emit("on-state-click")},onDifferenceFlagClick:function(){this.$emit("on-differenceFlag-click")}}},z=Y,U=(i("c1f8"),Object(y["a"])(z,G,H,!1,null,"d8d4c500",null)),Z=U.exports,$=i("450d"),W=50,Q={name:"unifyOrder",components:{headSearchBtn:f["a"],headEditBtn:b["a"],headSelectAllBtn:g["a"],emptyBill:m["a"],billBlock:F,filterPop:O,filterTab:Z,itemCompletePop:$["a"]},data:function(){return{filterPopShow:!1,listStart:0,billList:[],listLoading:!1,loadFinished:!0,listError:!1,pullRefreshLoading:!1,billState:null,differenceFlag:null,billStateActionShow:!1,billStateActions:[{id:null,name:"全部"},{id:"0",name:"未审核"},{id:"1",name:"已审核"}],differenceFlagActionShow:!1,differenceFlagActions:[{id:null,name:"全部"},{id:"0",name:"无差异"},{id:"1",name:"有差异"}],billEditFlag:!1,filterParams:{},itemCompletePopShow:!1,completeItem:[]}},created:function(){this.refreshBillList()},beforeRouteEnter:function(t,e,i){var o=["/main/home","/"],n=["/unifyOrderDetails"];o.includes(e.path)?i(function(e){e.restFilterParams(),e.restRouterParams(t.params),e.refreshBillList()}):n.includes(e.path)?i(function(t){t.refreshBillList()}):i()},computed:Object(u["a"])({},Object(p["c"])({loginerShopId:function(t){return t.loginer.loginerShopId},loginerId:function(t){return t.loginer.loginerId}}),{filterState:function(){var t=this;return this.billStateActions.find(function(e){return e.id===t.billState}).name},filterDifference:function(){var t=this;return this.differenceFlagActions.find(function(e){return e.id===t.differenceFlag}).name},computedShowOrder:function(t,e){var i=this;return function(t,e){return!i.billEditFlag||1!==t&&(0===e||3===e)}},isSelectAll:function(){var t=this.billList.filter(function(t){return 1!==t.billState&&(0===t.weightState||3===t.weightState)});if(0===t.length)return!1;var e=t.filter(function(t){return!!t.checked});return e.length===t.length}}),methods:{billListPostHandler:function(t){var e=this;return new h.a(function(i){e.$fxHttp.requestPost({url:"".concat(e.$fxBaseApi.url,"/accounts/").concat(e.loginerShopId,"/distributioninbills/users/").concat(e.loginerId),data:t}).then(function(t){e.listLoading=!1,i(t)})})},onSearchClick:function(){this.filterPopShow=!0},onFilterConfirm:function(t){var e=this;this.listStart=0;var i={start:this.listStart,size:W,paged:!0,businessDateStart:t.beginDate,businessDateEnd:t.endDate,billState:this.billState,differenceFlag:this.differenceFlag,rdcId:""===t.rdc.id?null:t.rdc.id,shopId:""===t.shop.id?null:t.shop.id,houseId:""===t.house.id?null:t.house.id,goodsId:""===t.goods.id?null:t.goods.id,businessType:""===t.billType.id?null:t.billType.id,sysBillCode:""===t.billNo?null:t.billNo};this.billListPostHandler(i).then(function(t){e.billList=t.storeBills})},onLoadMore:function(){var t=this,e=r()(this.$fxUtils.isEmptyObjSHW(this.filterParams)?{}:this.filterParams,{start:this.listStart,size:W,paged:!0});this.billListPostHandler(e).then(function(e){var i;(i=t.orderList).push.apply(i,Object(s["a"])(e.shopOrderBills))})},onPullRefresh:function(){var t=this;this.refreshBillList().then(function(e){t.pullRefreshLoading=!1})},refreshBillList:function(){var t=this;return new h.a(function(e){var i={start:t.listStart,size:W,paged:!0,businessDateStart:t.$fxCommon.orderFilterStartDate(),businessDateEnd:t.$fxCommon.orderFilterEndDate(),billState:t.billState,differenceFlag:t.differenceFlag};i=r()(i,t.translateFilterParams(t.filterParams)),t.billListPostHandler(i).then(function(i){t.billList=i.storeBills,e(i)})})},translateFilterParams:function(t){return this.$fxUtils.isEmptyObjSHW(t)?{}:{businessDateStart:t.beginDate,businessDateEnd:t.endDate,rdcId:""===t.rdc.id?null:t.rdc.id,shopId:""===t.shop.id?null:t.shop.id,houseId:""===t.house.id?null:t.house.id,goodsId:""===t.goods.id?null:t.goods.id,businessType:""===t.billType.id?null:t.billType.id,sysBillCode:""===t.billNo?null:t.billNo}},billStateClick:function(){this.billStateActionShow=!0},differenceFlagClick:function(){this.differenceFlagActionShow=!0},onBillStateAction:function(t){this.billStateActionShow=!1,this.billState=t.id,this.refreshBillList()},onDifferenceFlagAction:function(t){this.differenceFlagActionShow=!1,this.differenceFlag=t.id,this.refreshBillList()},onClickList:function(t){this.$router.push({path:"unifyOrderDetails",query:{billId:t.id}})},onBillEditClick:function(){this.billEditFlag=!this.billEditFlag},onExpressClick:function(){var t=this,e=this.billList.reduce(function(t,e){var i=e.checked&&0===e.billState?t.concat(e.id):t;return i},[]);if(0===e.length)return this.$fxToast.fail("请选择未审核单据！"),!1;this.$dialog.confirm({title:"提示",message:"确定要审核所选单据?"}).then(function(){t.expressHandler(e).then(function(e){t.billEditFlag=!t.billEditFlag,t.refreshBillList().then(function(){t.$fxToast.success(e.message)})})})},expressHandler:function(t){var e=this;return new h.a(function(i){e.$fxHttp.requestPut({url:"".concat(e.$fxBaseApi.url,"/accounts/").concat(e.loginerShopId,"/distributioninbills/users/").concat(e.loginerId),data:t,query:{m:"batchCheck"}}).then(function(t){i(t)})})},onSelectAllClick:function(){var t=this,e=!this.isSelectAll;this.billList.forEach(function(i){1===i.billState||0!==i.weightState&&3!==i.weightState||t.$set(i,"checked",e)})},restFilterParams:function(){this.filterParams={},this.billState=null,this.differenceFlag=null,this.billEditFlag=!1},restRouterParams:function(t){this.$fxUtils.isEmptyObjSHW(t)||(this.billState=t.billState)},onCompleteClick:function(){var t=this;this.getCheckList().then(function(e){return e.billDetailGroup?e.billDetailGroup.length?(t.itemCompletePopShow=!0,void(t.completeItem=JSON.parse(l()(e.billDetailGroup)))):(t.$fxToast.fail("没有可验收数据!"),!1):(t.$fxToast.fail("没有分组!"),!1)})},getCheckList:function(t){var e=this;return new h.a(function(t){e.$fxHttp.requestGet({url:"".concat(e.$fxBaseApi.url,"/accounts/").concat(e.loginerShopId,"/distributioninbills/-1/groups")}).then(function(e){t(e)})})},completeHandle:function(t,e){var i=this;return new h.a(function(o){var n="",a=[{id:t.id,checkAmount:e.groupAmount,inMoney:e.data.inMoney,taxInMoney:e.data.taxInMoney,inMoneyWithTax:e.data.inMoneyWithTax,bill:{id:t.billId}}];n="1"===e.checkFlag?"".concat(i.$fxBaseApi.url,"/accounts/").concat(i.loginerShopId,"/distributionindetails?m=updateCheckAmount"):"".concat(i.$fxBaseApi.url,"/accounts/").concat(i.loginerShopId,"/distributioninbills/").concat(t.billId,"?m=accept&groupId=").concat(e.groupId),i.$fxHttp.requestPut({url:n,data:a}).then(function(t){o(t)})})}}},J=Q,V=(i("a739"),Object(y["a"])(J,o,n,!1,null,"4be296bf",null));e["default"]=V.exports},6452:function(t,e,i){},7201:function(t,e,i){},"7fa4":function(t,e,i){},"8d5d":function(t,e,i){"use strict";var o=i("08d9"),n=i.n(o);n.a},"9c2c":function(t,e,i){},a09d:function(t,e,i){},a739:function(t,e,i){"use strict";var o=i("7201"),n=i.n(o);n.a},c137:function(t,e,i){},c1f8:function(t,e,i){"use strict";var o=i("6452"),n=i.n(o);n.a},cf93:function(t,e,i){},d4ad:function(t,e,i){"use strict";var o=i("9c2c"),n=i.n(o);n.a},dab9:function(t,e,i){"use strict";var o=i("a09d"),n=i.n(o);n.a},eb03:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("van-popup",{staticClass:"fx-list-popup-300",attrs:{position:"right","lock-scroll":!1},model:{value:t.popupShowFlag,callback:function(e){t.popupShowFlag=e},expression:"popupShowFlag"}},[i("listComp",{attrs:{visibleFlag:t.popupShowFlag,title:t.title,data:t.listData,loadFinished:t.currentLoadFinish,loading:t.onItemLoading},on:{"update:visibleFlag":function(e){t.popupShowFlag=e},"update:visible-flag":function(e){t.popupShowFlag=e},"update:loading":function(e){t.onItemLoading=e},"on-search":t.onSearchHandler,"on-select":t.onSelectHandler,"on-load":t.onListLoad}})],1)},n=[],a=i("75fc"),l=i("795b"),s=i.n(l),c=(i("c5f6"),i("f6bb")),r=50,d={name:"filterListPopup",components:{listComp:c["a"]},props:{value:Boolean,title:String,rollingLoad:Boolean,itemSize:{type:Number,default:r},getDataApi:Function},data:function(){return{popupShowFlag:!1,itemListLoadFinished:!1,onItemLoading:!1,listStart:0,listData:[]}},computed:{currentLoadFinish:function(){return this.itemListLoadFinished||!this.rollingLoad}},watch:{value:{immediate:!0,handler:function(t){var e=this;t&&this.onListRefresh().then(function(){e.$emit("on-show")})}},popupShowFlag:{immediate:!0,handler:function(t){t||this.$emit("input",!1)}}},methods:{onSearchHandler:function(t){this.onListRefresh(t)},onSelectHandler:function(t){this.$emit("on-select",t)},onListRefresh:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.listStart=0,new s.a(function(i){t.getDataApi(e,t.listStart,t.itemSize).then(function(e){t.popupShowFlag=!0,t.onItemLoading=!1,t.listStart+=t.itemSize,t.itemListLoadFinished=e.length<t.itemSize,t.listData=e,i()})})},onListLoad:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.getDataApi(e,this.listStart,this.itemSize).then(function(e){var i;t.onItemLoading=!1,t.listStart+=t.itemSize,e.length<t.itemSize&&(t.itemListLoadFinished=!0),(i=t.listData).push.apply(i,Object(a["a"])(e))})}}},h=d,u=i("2877"),p=Object(u["a"])(h,o,n,!1,null,null,null);e["a"]=p.exports},eb87:function(t,e,i){"use strict";var o=i("c137"),n=i.n(o);n.a},f3c0:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjRFMEVGQjYxREY1QzExRTk4NEQxQzk4RUQzQjYwMzQxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjRFMEVGQjYyREY1QzExRTk4NEQxQzk4RUQzQjYwMzQxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NEUwRUZCNUZERjVDMTFFOTg0RDFDOThFRDNCNjAzNDEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NEUwRUZCNjBERjVDMTFFOTg0RDFDOThFRDNCNjAzNDEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5jgS7LAAAC50lEQVR42sSXy2tTQRTGzyS1KFgxYqkLQaWtAREXYiJpNUQLEaqCj/pAfBStuHHhRtC/wG4EX4hvKrpR3NWapq2KsZigreimBJtErSsfNYipSKh3/KYZ4zWZ3HtjEnrgy+ZOzm/mnJkzZxjnnKbDqsRP2xnNbByD1kIboWaoAXLIb0koBj2D7kNPIcPV3Dtmy4ANzAa1QyclTGV1UmJCx+UkTkFdkGbkuJAtgSLQdQOoyhrkfyLSR1FgH/QccpWQRpf04bUK9kNBaH4Z9pDw0Q9tMAM7Re6h6jJu4Grp01kIbIduQTUVOD2zpW+7CnygxJxayXl7LpjJI1M28y1jdHZ/3hY6IVlZsLfII2NoLcsZdaxjtGCu8qh59eDWckH9Kxgd9DGagWzejSgLWGu2ZMKalHUSQbFjapO/rEE3rWS0p4lRFaC3Bzl1v1SCPXpwo2rEkRZGNsDvhDmNpwwKOcZsXcVox2o2lcGuJ5wCrzkVuH+W6sEOZe2rY7S4FmdhJtHVR5ySE2rwdhejXR5Gk6jMN0OcggJaeJ4Os1pNlwY0+jBO5K7P5G3OrH+/izTsRmiF0kjHlYeceo2heQUkqfoY+0h0oU+jMcA9jYwOr2dUI+HViJVYZZub0fefRJcHOD0esXS3J/Xg0UKj4oCfD/6Fd2DlC+fRVD63IcTffojIcApFLTcUb/Q5DkNrCo18+4noXK9GR/02anYyWlSbgX+dyIR3KFFUFxPWr7jHbPS7z4Bj5QlMQkDFLr/YVzRU2AM9OCQ7B0Mb+wJYv0bhUU7XsMtfvS8aGpOtURYsPHRa+adY+ekeTi8S/9Ukdv5ph/THSfRIQxW8nYYlI+9aFIVxH5SqAFT43CsZyg4kCu2E0mWEpqXPqFnPFYC2lGnlKekrYLXLDMiOYbjEnLpUULNaLULjhg6JAlYEMC7/484Nb94TxsDE1r8hd6OobJvl3V2f84SJyydMNzRo9ILIXqXT9Wj7LcAAqr/RbQBzkgIAAAAASUVORK5CYII="},f6bb:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shop-popup"},[i("w-header",{attrs:{title:t.title,leftOptions:t.leftOptions},on:{"on-click-back":t.onCloseClick}}),i("van-pro-search",{directives:[{name:"show",rawName:"v-show",value:t.searchShow,expression:"searchShow"}],attrs:{shape:"round"},on:{search:t.search},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}}),i("div",{staticClass:"popup-content"},[i("van-list",{attrs:{finished:t.loadFinished,"finished-text":"没有更多了",error:t.listError,"immediate-check":t.immediateCheck,"error-text":"请求失败，点击重新加载"},on:{"update:error":function(e){t.listError=e},load:t.onLoad},model:{value:t.listLoading,callback:function(e){t.listLoading=e},expression:"listLoading"}},t._l(t.data,function(e){return i("van-cell",{key:e.id,staticClass:"fx-van-cell",attrs:{title:e.name},on:{click:function(i){return t.indexListClick(e)}}})}),1)],1)],1)},n=[],a={name:"filterPop",props:{loading:Boolean,visibleFlag:Boolean,title:String,data:{type:Array,default:function(){return[]}},searchShow:{type:Boolean,default:!0},loadFinished:Boolean,immediateCheck:{type:Boolean,default:!0}},data:function(){return{leftOptions:{showBackBtn:!0,preventGoBack:!0},searchKey:"",listLoading:!1,listError:!1}},watch:{loading:{handler:function(t){t||(this.listLoading=!1)},immediate:!0},visibleFlag:function(t){t&&(this.searchKey="")}},methods:{onCloseClick:function(){this.$emit("update:visibleFlag",!1)},indexListClick:function(t){this.$emit("on-select",t),this.$emit("update:visibleFlag",!1)},search:function(t){this.$emit("on-search",t)},onLoad:function(){this.$emit("update:loading",!0),this.$emit("on-load",this.searchKey||null)}}},l=a,s=(i("8d5d"),i("2877")),c=Object(s["a"])(l,o,n,!1,null,"2a1c11fe",null);e["a"]=c.exports},faf1:function(t,e,i){"use strict";var o=i("cf93"),n=i.n(o);n.a}}]);
//# sourceMappingURL=unifyOrder.44ad476b.js.map