(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["reportKc010"],{"064d":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("reportFormContainer",{ref:"reportForm",attrs:{reportFormConfig:t.reportFormConfig,reportPlans:t.reportPlans,getReportParams:t.getReportParams,filterPopShow:t.filterPopShow,showSearchBar:"",planDetailsApi:t.planDetailsApi,reportFormApi:t.reportFormApi},on:{"update:filterPopShow":function(e){t.filterPopShow=e},"update:filter-pop-show":function(e){t.filterPopShow=e}}},[r("filterPop",{attrs:{slot:"slot-filter",visibleFlag:t.filterPopShow,filterParams:t.filterParams},on:{"update:visibleFlag":function(e){t.filterPopShow=e},"update:visible-flag":function(e){t.filterPopShow=e},"update:filterParams":function(e){t.filterParams=e},"update:filter-params":function(e){t.filterParams=e},"on-confirm":t.filterConfirm},slot:"slot-filter"})],1)},n=[],i=r("795b"),l=r.n(i),s=(r("7f7f"),r("96cf"),r("3b8d")),a=r("cebc"),c=r("2f62"),p=r("fe17"),u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("filterPopComp",{on:{"on-close":t.onCloseClick,"on-confirm":t.onConfirmClick,"on-reset":t.onResetClick}},[r("van-cell-group",{attrs:{slot:"solt-filter-cell"},slot:"solt-filter-cell"},[r("filterCell",{attrs:{title:"门店名称",value:t.shop,showCloseBtn:!!t.shopId&&!t.shopCellDisable},on:{"on-click":function(e){return t.onFilterCellClick("shopPopShow")},"on-clear":function(e){return t.onFilterCellClear("shop")}}}),r("filterCell",{attrs:{title:"配送中心",value:t.center,showCloseBtn:!!t.centerId},on:{"on-click":function(e){return t.onFilterCellClick("centerPopShow")},"on-clear":function(e){return t.onFilterCellClear("center")}}}),r("filterCell",{attrs:{title:"仓库名称",value:t.store,showCloseBtn:!!t.storeId},on:{"on-click":function(e){return t.onFilterCellClick("storePopShow")},"on-clear":function(e){return t.onFilterCellClear("store")}}}),r("filterCell",{attrs:{title:"品项大类",value:t.bigClass,showCloseBtn:!!t.bigClassId},on:{"on-click":function(e){return t.onFilterCellClick("bigClassPopShow")},"on-clear":function(e){return t.onFilterCellClear(["bigClass","smallClass","item"])}}}),r("filterCell",{attrs:{title:"品项小类",value:t.smallClass,showCloseBtn:!!t.smallClassId},on:{"on-click":function(e){return t.onFilterCellClick("smallClassPopShow")},"on-clear":function(e){return t.onFilterCellClear(["smallClass","item"])}}}),r("filterCell",{attrs:{title:"品项名称",value:t.item,showCloseBtn:!!t.itemId},on:{"on-click":function(e){return t.onFilterCellClick("itemPopShow")},"on-clear":function(e){return t.onFilterCellClear("item")}}})],1),r("filterListPopup",{attrs:{title:"机构名称检索",rollingLoad:!0,getDataApi:t.getShopListData},on:{"on-select":function(e){return t.onFilterSelect(arguments,"shop")}},model:{value:t.shopPopShow,callback:function(e){t.shopPopShow=e},expression:"shopPopShow"}}),r("filterListPopup",{attrs:{title:"配送中心检索",rollingLoad:!0,getDataApi:t.getCenterListData},on:{"on-select":function(e){return t.onFilterSelect(arguments,"center")}},model:{value:t.centerPopShow,callback:function(e){t.centerPopShow=e},expression:"centerPopShow"}}),r("filterListPopup",{attrs:{title:"仓库检索",rollingLoad:!0,getDataApi:t.getStoreListData},on:{"on-select":function(e){return t.onFilterSelect(arguments,"store")}},model:{value:t.storePopShow,callback:function(e){t.storePopShow=e},expression:"storePopShow"}}),r("filterListPopup",{attrs:{title:"品项大类检索",rollingLoad:!0,getDataApi:t.getBigClassListData},on:{"on-select":function(e){return t.onFilterSelect(arguments,"bigClass")}},model:{value:t.bigClassPopShow,callback:function(e){t.bigClassPopShow=e},expression:"bigClassPopShow"}}),r("filterListPopup",{attrs:{title:"品项小类检索",rollingLoad:!0,getDataApi:t.getSmallClassListData},on:{"on-select":function(e){return t.onFilterSelect(arguments,"smallClass")}},model:{value:t.smallClassPopShow,callback:function(e){t.smallClassPopShow=e},expression:"smallClassPopShow"}}),r("filterListPopup",{attrs:{title:"品项检索",rollingLoad:!0,getDataApi:t.getItemListData},on:{"on-select":function(e){return t.onFilterSelect(arguments,"item")}},model:{value:t.itemPopShow,callback:function(e){t.itemPopShow=e},expression:"itemPopShow"}})],1)},h=[],f=(r("ac6a"),r("768b")),m=r("cd56"),g=r("3a5e"),d=r("eb03"),C=["shop","center","store","bigClass","smallClass","item"],S={name:"filterPop",components:{filterPopComp:m["a"],filterCell:g["a"],filterListPopup:d["a"]},props:{visibleFlag:Boolean,filterParams:{type:Object,default:function(){return{}}}},data:function(){return{leftOptions:{showBackBtn:!0,preventGoBack:!0},shop:"请选择",shopId:"",center:"请选择",centerId:"",store:"请选择",storeId:"",bigClass:"请选择",bigClassId:"",smallClass:"请选择",smallClassId:"",item:"请选择",itemId:"",shopPopShow:!1,centerPopShow:!1,storePopShow:!1,bigClassPopShow:!1,smallClassPopShow:!1,itemPopShow:!1}},created:function(){this.initDefaultShop(),this.initDefaultCenter()},watch:{visibleFlag:{handler:function(t){t&&(this.$fxUtils.isEmptyObjSHW(this.filterParams)?this.resetHandler():this.setFilterParams())},immediate:!0}},computed:Object(a["a"])({},Object(c["c"])({loginerShopId:function(t){return t.loginer.loginerShopId},loginerShopName:function(t){return t.loginer.loginerShopName},loginerId:function(t){return t.loginer.loginerId},loginerOrganType:function(t){return t.loginer.loginerOrganType}}),{shopCellDisable:function(){return this.$fxStateMiddleware.stateIs("loginerOrganType")(["shop"])(this.loginerOrganType)},centerCellDisable:function(){return this.$fxStateMiddleware.stateIs("loginerOrganType")(["center"])(this.loginerOrganType)}}),methods:{initDefaultShop:function(){this.shopId=this.filterParams.shopId,this.shop=this.filterParams.shop},initDefaultCenter:function(){this.centerId=this.filterParams.centerId,this.center=this.filterParams.center},getFilterParams:function(){return{shop:this.shop,shopId:this.shopId,center:this.center,centerId:this.centerId,store:this.store,storeId:this.storeId,bigClass:this.bigClass,bigClassId:this.bigClassId,smallClass:this.smallClass,smallClassId:this.smallClassId,item:this.item,itemId:this.itemId}},onCloseClick:function(){this.$emit("update:visibleFlag",!1)},onConfirmClick:function(){var t=this;this.confirmCheck().then(function(){t.$emit("update:visibleFlag",!1),t.$emit("update:filterParams",t.getFilterParams()),t.$emit("on-confirm",t.getFilterParams())})},onResetClick:function(){this.resetHandler()},resetHandler:function(){this.resetFilterCell(C),this.shopCellDisable&&(this.shop=this.loginerShopName,this.shopId=this.loginerShopId),this.centerCellDisable&&this.initDefaultCenter()},setFilterParams:function(){var t=this;C.forEach(function(e){t.filterParams[e]?(t[e]=t.filterParams[e],t["".concat(e,"Id")]=t.filterParams["".concat(e,"Id")]):t.resetFilterCell(e)})},confirmCheck:function(){var t=this;return new l.a(function(e){if(!t.shopId)return t.$fxToast.fail("请选择门店!"),!1;e()})},onFilterCellClick:function(t){this[t]=!0},onFilterCellClear:function(t){this.resetFilterCell(t)},onFilterSelect:function(t,e){var r=Object(f["a"])(t,1),o=r[0];this[e]=o.name,this["".concat(e,"Id")]=o.id,this.selectAfterHandler(e)},selectAfterHandler:function(t){switch(t){case"center":this.resetFilterCell("store");break;case"bigClass":this.resetFilterCell(["smallClass","item"]);break;case"smallClass":this.resetFilterCell("item");break}},resetFilterCell:function(t){var e=this,r=[].concat(t);r.forEach(function(t){e[t]="请选择",e["".concat(t,"Id")]=""})},getShopListData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o={keyword:t,start:e,size:r};return this.$fxApi("reportForm.getAuthShop")(o)},getCenterListData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o={keyword:t,start:e,size:r};return this.$fxApi("reportForm.getAuthCenter")(o)},getStoreListData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o={keyword:t,centerId:this.centerId,start:e,size:r};return this.$fxApi("reportForm.getUsingStore")(o)},getBigClassListData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o={keyword:t,bigOrSmall:"1",start:e,size:r};return this.$fxApi("reportForm.getItemClass")(o)},getSmallClassListData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o={keyword:t,bigOrSmall:"2",goodsBigType:this.bigClassId,start:e,size:r};return this.$fxApi("reportForm.getItemClass")(o)},getItemListData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o={keyword:t,start:e,size:r,goodsBigType:this.bigClassId,goodsSmallType:this.smallClassId};return this.$fxApi("reportForm.getItem")(o)}}},P=S,I=r("2877"),b=Object(I["a"])(P,u,h,!1,null,null,null),w=b.exports,v="dp090",k={name:"report-dp090",components:{reportFormContainer:p["a"],filterPop:w},data:function(){var t=this.$fxCommon.getReportFormConfig(v);return{reportFormConfig:t,reportFormId:v,filterPopShow:!1,filterParams:{}}},mounted:function(){this.$refs.reportForm.init({reportPlan:this.reportPlans[0],getReportParams:this.getReportParams})},computed:Object(a["a"])({},Object(c["c"])({loginerShopId:function(t){return t.loginer.loginerShopId},loginerShopName:function(t){return t.loginer.loginerShopName},loginerOrganType:function(t){return t.loginer.loginerOrganType},loginerId:function(t){return t.loginer.loginerId}}),Object(c["b"])(["reportPlansGetter"]),{reportPlans:function(){return this.reportPlansGetter(v)},centerCellDisable:function(){return this.$fxStateMiddleware.stateIs("loginerOrganType")(["center"])(this.loginerOrganType)}}),methods:{filterConfirm:function(t){var e=this;this.getReportParams(t).then(function(t){e.$refs.reportForm.refreshReportForm(t)})},getReportParams:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,r=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:{},!this.$fxUtils.isEmptyObjSHW(e)){t.next=7;break}return t.next=4,this.getReportParamsDefault();case 4:t.t0=t.sent,t.next=8;break;case 7:t.t0={shopId:e.shopId,centerId:e.centerId,houseTypeId:e.storeTypeId,houseId:e.storeId,goodBigTypeId:e.bigClassId,goodSmallTypeId:e.smallClassId,goodsId:e.itemId,agg:{}};case 8:return t.abrupt("return",t.t0);case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getReportParamsDefault:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,r,o,n,i,l;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getDefaultShop();case 2:return e=t.sent,r=e.shop,o=e.shopId,this.setDefaultShop(r,o),t.next=8,this.getDefaultCenter();case 8:return n=t.sent,i=n.center,l=n.centerId,this.setDefaultCenter(i,l),t.abrupt("return",{shopId:o,centerId:l,agg:{}});case 13:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getDefaultShop:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getDefaultShopListData().then(function(t){if(t.shops){var e=t.shops[0].name,r=t.shops[0].id;return{shop:e,shopId:r}}return{shop:"",shopId:""}}));case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getDefaultShopListData:function(){var t=this;return new l.a(function(e){var r={m:"getDefaultShopList"};t.$fxHttp.requestGet({url:"".concat(t.$fxBaseApi.url,"/accounts/").concat(t.loginerShopId,"/users/").concat(t.loginerId,"/shops"),data:r}).then(function(t){e(t)})})},setDefaultShop:function(t,e){this.filterParams.shop=t,this.filterParams.shopId=e},getDefaultShopHandler:function(){var t=this;return new l.a(function(e,r){t.getShopListData().then(function(o){if(o.length>0)e({shop:o[0].name,shopId:o[0].id});else{var n="当前没有可查询机构";t.$fxToast.fail(n),r(n)}})})},getShopListData:function(){var t={keyword:null,start:0,size:1};return this.$fxApi("reportForm.getAuthShop")(t)},getDefaultCenter:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.centerCellDisable){t.next=6;break}return t.next=3,this.getDefaultCenterHandler();case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0={center:"请选择",centerId:""};case 7:return t.abrupt("return",t.t0);case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),setDefaultCenter:function(t,e){this.filterParams.center=t,this.filterParams.centerId=e},getDefaultCenterHandler:function(){var t=this;return new l.a(function(e,r){t.getCenterListData().then(function(o){if(o.length>0)e({center:o[0].name,centerId:o[0].id});else{var n="当前没有可查询机构";t.$fxToast.fail(n),r(n)}})})},getCenterListData:function(){var t={keyword:null,start:0,size:1};return this.$fxApi("reportForm.getAuthCenter")(t)},planDetailsApi:function(t){return this.$fxHttp.requestGet({url:"".concat(this.$fxBaseApi.url,"/accounts/").concat(this.loginerShopId,"/users/").concat(this.loginerId,"/report/distributionReport/scheme"),data:t}).then(function(t){return l.a.resolve(t.reportSchemeRowData)})},reportFormApi:function(t){return this.$fxHttp.requestReport({url:"".concat(this.$fxBaseApi.url,"/accounts/").concat(this.loginerShopId,"/users/").concat(this.loginerId,"/report/distributionReport/").concat(this.reportFormId),data:t}).then(function(t){return l.a.resolve(t.mbDistributionReportData)})}}},F=k,y=Object(I["a"])(F,o,n,!1,null,null,null);e["default"]=y.exports},f723:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("reportFormContainer",{ref:"reportForm",attrs:{reportFormConfig:t.reportFormConfig,reportPlans:t.reportPlans,getReportParams:t.getReportParams,filterPopShow:t.filterPopShow,showSearchBar:""},on:{"update:filterPopShow":function(e){t.filterPopShow=e},"update:filter-pop-show":function(e){t.filterPopShow=e}}},[r("filterPop",{attrs:{slot:"slot-filter",visibleFlag:t.filterPopShow,filterParams:t.filterParams},on:{"update:visibleFlag":function(e){t.filterPopShow=e},"update:visible-flag":function(e){t.filterPopShow=e},"update:filterParams":function(e){t.filterParams=e},"update:filter-params":function(e){t.filterParams=e},"on-confirm":t.filterConfirm},slot:"slot-filter"})],1)},n=[],i=(r("7f7f"),r("795b")),l=r.n(i),s=(r("96cf"),r("3b8d")),a=r("cebc"),c=r("2f62"),p=r("fe17"),u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("filterPopComp",{on:{"on-close":t.onCloseClick,"on-confirm":t.onConfirmClick,"on-reset":t.onResetClick}},[r("van-cell-group",{attrs:{slot:"solt-filter-cell"},slot:"solt-filter-cell"},[r("filterCell",{attrs:{title:"机构名称",value:t.shop,showCloseBtn:!!t.shopId},on:{"on-click":function(e){return t.onFilterCellClick("shopPopShow")},"on-clear":function(e){return t.onFilterCellClear("shop")}}}),r("filterCell",{attrs:{title:"仓库类型",value:t.storeType,showCloseBtn:!!t.storeTypeId},on:{"on-click":function(e){return t.onFilterCellClick("storeTypePopShow")},"on-clear":function(e){return t.onFilterCellClear(["storeType","store"])}}}),r("filterCell",{attrs:{title:"仓库名称",value:t.store,showCloseBtn:!!t.storeId},on:{"on-click":function(e){return t.onFilterCellClick("storePopShow")},"on-clear":function(e){return t.onFilterCellClear("store")}}}),r("van-pro-field",{attrs:{label:"仓位编号",placeholder:"请输入仓位编号","input-align":"right"},model:{value:t.storeNO,callback:function(e){t.storeNO=e},expression:"storeNO"}}),r("filterCell",{attrs:{title:"品项大类",value:t.bigClass,showCloseBtn:!!t.bigClassId},on:{"on-click":function(e){return t.onFilterCellClick("bigClassPopShow")},"on-clear":function(e){return t.onFilterCellClear(["bigClass","smallClass","item"])}}}),r("filterCell",{attrs:{title:"品项小类",value:t.smallClass,showCloseBtn:!!t.smallClassId},on:{"on-click":function(e){return t.onFilterCellClick("smallClassPopShow")},"on-clear":function(e){return t.onFilterCellClear(["smallClass","item"])}}}),r("filterCell",{attrs:{title:"品项类型",value:t.itemType,showCloseBtn:!!t.itemTypeId},on:{"on-click":function(e){return t.onFilterCellClick("itemTypePopShow")},"on-clear":function(e){return t.onFilterCellClear(["itemType","item"])}}}),r("filterCell",{attrs:{title:"品项名称",value:t.item,showCloseBtn:!!t.itemId},on:{"on-click":function(e){return t.onFilterCellClick("itemPopShow")},"on-clear":function(e){return t.onFilterCellClear("item")}}}),r("van-cell",{attrs:{title:"当前库存范围"}}),r("van-pro-number-field",{attrs:{label:"库存下限","input-align":"right",min:"0",max:t.maxAmount,intLength:t.numberLength,pointSize:t.sysPointSize},model:{value:t.stockMinAmount,callback:function(e){t.stockMinAmount=e},expression:"stockMinAmount"}}),r("van-pro-number-field",{attrs:{label:"库存上限","input-align":"right",min:"0",max:t.maxAmount,intLength:t.numberLength,pointSize:t.sysPointSize},model:{value:t.stockMaxAmount,callback:function(e){t.stockMaxAmount=e},expression:"stockMaxAmount"}})],1),r("filterListPopup",{attrs:{title:"机构名称检索",rollingLoad:!0,getDataApi:t.getShopListData},on:{"on-select":function(e){return t.onFilterSelect(arguments,"shop")}},model:{value:t.shopPopShow,callback:function(e){t.shopPopShow=e},expression:"shopPopShow"}}),r("filterListPopup",{attrs:{title:"仓库类型检索",rollingLoad:!0,getDataApi:t.getStoreTypeListData},on:{"on-select":function(e){return t.onFilterSelect(arguments,"storeType")}},model:{value:t.storeTypePopShow,callback:function(e){t.storeTypePopShow=e},expression:"storeTypePopShow"}}),r("filterListPopup",{attrs:{title:"仓库检索",rollingLoad:!0,getDataApi:t.getStoreListData},on:{"on-select":function(e){return t.onFilterSelect(arguments,"store")}},model:{value:t.storePopShow,callback:function(e){t.storePopShow=e},expression:"storePopShow"}}),r("filterListPopup",{attrs:{title:"品项大类检索",rollingLoad:!0,getDataApi:t.getBigClassListData},on:{"on-select":function(e){return t.onFilterSelect(arguments,"bigClass")}},model:{value:t.bigClassPopShow,callback:function(e){t.bigClassPopShow=e},expression:"bigClassPopShow"}}),r("filterListPopup",{attrs:{title:"品项小类检索",rollingLoad:!0,getDataApi:t.getSmallClassListData},on:{"on-select":function(e){return t.onFilterSelect(arguments,"smallClass")}},model:{value:t.smallClassPopShow,callback:function(e){t.smallClassPopShow=e},expression:"smallClassPopShow"}}),r("filterListPopup",{attrs:{title:"品项类别检索",rollingLoad:!0,getDataApi:t.getItemTypeListData},on:{"on-select":function(e){return t.onFilterSelect(arguments,"itemType")}},model:{value:t.itemTypePopShow,callback:function(e){t.itemTypePopShow=e},expression:"itemTypePopShow"}}),r("filterListPopup",{attrs:{title:"品项检索",rollingLoad:!0,getDataApi:t.getItemListData},on:{"on-select":function(e){return t.onFilterSelect(arguments,"item")}},model:{value:t.itemPopShow,callback:function(e){t.itemPopShow=e},expression:"itemPopShow"}})],1)},h=[],f=(r("ac6a"),r("768b")),m=r("cd56"),g=r("3a5e"),d=r("eb03"),C=["shop","storeType","store","bigClass","smallClass","itemType","item"],S={name:"filterPop",components:{filterPopComp:m["a"],filterCell:g["a"],filterListPopup:d["a"]},props:{visibleFlag:Boolean,filterParams:{type:Object,default:function(){return{}}}},data:function(){return{leftOptions:{showBackBtn:!0,preventGoBack:!0},shop:"请选择",shopId:"",storeType:"请选择",storeTypeId:"",store:"请选择",storeId:"",storeNO:"",bigClass:"请选择",bigClassId:"",smallClass:"请选择",smallClassId:"",itemType:"请选择",itemTypeId:"",item:"请选择",itemId:"",stockMinAmount:0,stockMaxAmount:0,shopPopShow:!1,storeTypePopShow:!1,storePopShow:!1,bigClassPopShow:!1,smallClassPopShow:!1,itemTypePopShow:!1,itemPopShow:!1}},created:function(){this.initDefaultShop()},watch:{visibleFlag:{handler:function(t){t&&(this.$fxUtils.isEmptyObjSHW(this.filterParams)?this.resetHandler():this.setFilterParams())},immediate:!0}},computed:Object(a["a"])({},Object(c["c"])({sysPointSize:"sysPointSize",numberLength:"numberLength",maxAmount:"maxAmount",loginerShopId:function(t){return t.loginer.loginerShopId},loginerShopName:function(t){return t.loginer.loginerShopName},loginerId:function(t){return t.loginer.loginerId},loginerOrganType:function(t){return t.loginer.loginerOrganType}}),{shopCellDisable:function(){return this.$fxStateMiddleware.stateIs("loginerOrganType")(["shop","center","area"])(this.loginerOrganType)}}),methods:{initDefaultShop:function(){this.shopId=this.filterParams.shopId,this.shop=this.filterParams.shop},getFilterParams:function(){var t=0===this.stockMinAmount?null:this.stockMinAmount,e=0===this.stockMaxAmount?null:this.stockMaxAmount;return{shop:this.shop,shopId:this.shopId,storeType:this.storeType,storeTypeId:this.storeTypeId,store:this.store,storeId:this.storeId,bigClass:this.bigClass,bigClassId:this.bigClassId,smallClass:this.smallClass,smallClassId:this.smallClassId,itemType:this.itemType,itemTypeId:this.itemTypeId,item:this.item,itemId:this.itemId,storeNO:this.storeNO,stockMinAmount:t,stockMaxAmount:e}},onCloseClick:function(){this.$emit("update:visibleFlag",!1)},onConfirmClick:function(){var t=this;this.confirmCheck().then(function(){t.$emit("update:visibleFlag",!1),t.$emit("update:filterParams",t.getFilterParams()),t.$emit("on-confirm",t.getFilterParams())})},onResetClick:function(){this.resetHandler()},resetHandler:function(){this.storeNO="",this.stockMinAmount=0,this.stockMaxAmount=0,this.resetFilterCell(C),this.shopCellDisable&&(this.shop=this.loginerShopName,this.shopId=this.loginerShopId)},setFilterParams:function(){var t=this;C.forEach(function(e){t.filterParams[e]?(t[e]=t.filterParams[e],t["".concat(e,"Id")]=t.filterParams["".concat(e,"Id")]):t.resetFilterCell(e)})},confirmCheck:function(){var t=this;return new l.a(function(e){if(!t.shopId)return t.$fxToast.fail("请选择机构!"),!1;e()})},onFilterCellClick:function(t){this[t]=!0},onFilterCellClear:function(t){this.resetFilterCell(t)},onFilterSelect:function(t,e){var r=Object(f["a"])(t,1),o=r[0];this[e]=o.name,this["".concat(e,"Id")]=o.id,this.selectAfterHandler(e)},selectAfterHandler:function(t){switch(t){case"shop":this.resetFilterCell("store");break;case"storeType":this.resetFilterCell("store");break;case"bigClass":this.resetFilterCell(["smallClass","item"]);break;case"smallClass":this.resetFilterCell("item");break;case"itemType":this.resetFilterCell("item");break}},resetFilterCell:function(t){var e=this,r=[].concat(t);r.forEach(function(t){e[t]="请选择",e["".concat(t,"Id")]=""})},getShopListData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o={keyword:t,shoparea:null,start:e,size:r};return this.$fxApi("reportForm.getShop")(o)},getStoreTypeListData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o={keyword:t,start:e,size:r};return this.$fxApi("reportForm.getStoreType")(o)},getStoreListData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o={keyword:t,shopName:this.shopId,houseType:this.storeTypeId,start:e,size:r};return this.$fxApi("reportForm.getStore")(o)},getBigClassListData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o={keyword:t,bigOrSmall:"1",start:e,size:r};return this.$fxApi("reportForm.getItemClass")(o)},getSmallClassListData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o={keyword:t,bigOrSmall:"2",goodsBigType:this.bigClassId,start:e,size:r};return this.$fxApi("reportForm.getItemClass")(o)},getItemListData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o={keyword:t,start:e,size:r,goodsBigType:this.bigClassId,goodsSmallType:this.smallClassId,goodsStyle:this.itemTypeId};return this.$fxApi("reportForm.getItem")(o)},getItemTypeListData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o={keyword:t,start:e,size:r};return this.$fxApi("reportForm.getItemType")(o)}}},P=S,I=r("2877"),b=Object(I["a"])(P,u,h,!1,null,null,null),w=b.exports,v="kc010",k={name:"report-kc010",components:{reportFormContainer:p["a"],filterPop:w},data:function(){var t=this.$fxCommon.getReportFormConfig(v);return{reportFormConfig:t,filterPopShow:!1,filterParams:{}}},mounted:function(){this.$refs.reportForm.init({reportPlan:this.reportPlans[0],getReportParams:this.getReportParams})},computed:Object(a["a"])({},Object(c["c"])({loginerShopId:function(t){return t.loginer.loginerShopId},loginerShopName:function(t){return t.loginer.loginerShopName},loginerOrganType:function(t){return t.loginer.loginerOrganType}}),Object(c["b"])(["reportPlansGetter"]),{reportPlans:function(){return this.reportPlansGetter(v)},shopCellDisable:function(){return this.$fxStateMiddleware.stateIs("loginerOrganType")(["shop","center","area"])(this.loginerOrganType)}}),methods:{filterConfirm:function(t){var e=this;this.getReportParams(t).then(function(t){e.$refs.reportForm.refreshReportForm(t)})},getReportParams:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,r=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:{},!this.$fxUtils.isEmptyObjSHW(e)){t.next=7;break}return t.next=4,this.getReportParamsDefault();case 4:t.t0=t.sent,t.next=8;break;case 7:t.t0={shopId:e.shopId,houseTypeId:e.storeTypeId,houseId:e.storeId,positionCode:e.storeNO,goodBigTypeId:e.bigClassId,goodSmallTypeId:e.smallClassId,goodStyleId:e.itemTypeId,goodsId:e.itemId,endAmount:e.stockMinAmount,startAmount:e.stockMaxAmount,agg:{}};case 8:return t.abrupt("return",t.t0);case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getReportParamsDefault:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,r,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getDefaultShop();case 2:return e=t.sent,r=e.shop,o=e.shopId,this.setDefaultShop(r,o),t.abrupt("return",{shopId:o,agg:{amount:"sum"}});case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getDefaultShop:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.shopCellDisable){t.next=4;break}t.t0={shop:this.loginerShopName,shopId:this.loginerShopId},t.next=7;break;case 4:return t.next=6,this.getDefaultShopHandler();case 6:t.t0=t.sent;case 7:return t.abrupt("return",t.t0);case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),setDefaultShop:function(t,e){this.filterParams.shop=t,this.filterParams.shopId=e},getDefaultShopHandler:function(){var t=this;return new l.a(function(e,r){t.getShopListData().then(function(o){if(o.length>0)e({shop:o[0].name,shopId:o[0].id});else{var n="当前没有可查询机构";t.$fxToast.fail(n).then(function(){r(n)})}})})},getShopListData:function(){var t={keyword:null,start:0,size:1};return this.$fxApi("reportForm.getShop")(t)}}},F=k,y=Object(I["a"])(F,o,n,!1,null,null,null);e["default"]=y.exports}}]);
//# sourceMappingURL=reportKc010.a3842193.js.map