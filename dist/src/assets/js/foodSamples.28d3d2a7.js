(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["foodSamples"],{"08d9":function(t,e,o){},"098c":function(t,e,o){},"09b5":function(t,e,o){"use strict";var a=o("df72"),n=o.n(a);n.a},"100a":function(t,e,o){"use strict";var a=o("e247"),n=o.n(a);n.a},"1a83":function(t,e,o){"use strict";var a=o("81b8"),n=o.n(a);n.a},"36b4":function(t,e,o){},"3b8d":function(t,e,o){"use strict";o.d(e,"a",function(){return s});var a=o("795b"),n=o.n(a);function i(t,e,o,a,i,s,r){try{var l=t[s](r),c=l.value}catch(h){return void o(h)}l.done?e(c):n.a.resolve(c).then(a,i)}function s(t){return function(){var e=this,o=arguments;return new n.a(function(a,n){var s=t.apply(e,o);function r(t){i(s,a,n,r,l,"next",t)}function l(t){i(s,a,n,r,l,"throw",t)}r(void 0)})}}},4102:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order-empty"},[a("img",{staticClass:"empty-icon",attrs:{src:o("6ee7")}}),a("div",{staticClass:"empty-text"},[t._v(t._s(t.message))])])},n=[],i={name:"emptyBill",props:{message:{type:String,default:"暂无可查看的订单"}}},s=i,r=(o("faf1"),o("2877")),l=Object(r["a"])(s,a,n,!1,null,"3c6ad708",null);e["a"]=l.exports},4807:function(t,e,o){"use strict";var a=o("098c"),n=o.n(a);n.a},5402:function(t,e,o){"use strict";var a=o("73b7"),n=o.n(a);n.a},"5fc2":function(t,e,o){"use strict";var a=o("36b4"),n=o.n(a);n.a},"62b4":function(t,e,o){},6422:function(t,e,o){},"73b7":function(t,e,o){},"75f3":function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"item-edit"},[o("w-header",{attrs:{title:"选择菜品",leftOptions:t.leftOptions},on:{"on-click-back":t.onCloseClick}}),o("div",{staticClass:"item-search clearfix"},[o("van-search",{attrs:{placeholder:"请输入搜索关键词",shape:"round"},on:{search:t.search},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})],1),o("div",{staticClass:"item-edit-content"},[o("addItemClassList",{attrs:{itemClassList:t.itemClassList,classTitle:"全部菜品"},on:{"on-change-class":t.changeClass},model:{value:t.currentClass,callback:function(e){t.currentClass=e},expression:"currentClass"}}),o("div",{ref:"details-content",staticClass:"item-details-content"},[o("van-list",{attrs:{finished:t.loadFinished,"finished-text":"没有更多了","error-text":"请求失败，点击重新加载"},on:{load:t.onLoadMore},model:{value:t.listLoading,callback:function(e){t.listLoading=e},expression:"listLoading"}},t._l(t.itemList,function(e){return o("div",{key:e.id,ref:"details-row-"+e.id,refInFor:!0,staticClass:"item-detail",on:{click:function(o){return t.clickCheckBoxes(e)}}},[o("div",{staticClass:"item-details-img"},[o("img",{attrs:{src:t.comptedItemImgSrc(e.imageUrls),onerror:t.$fxCommon.errorImg("item")}})]),o("div",{staticClass:"item-details-params"},[o("div",{staticClass:"item-details-name fx-ellipsis"},[t._v(t._s(e.name))]),o("div",{staticClass:"item-details-spec fx-ellipsis"},[t._v(t._s(e.spec))])]),o("van-checkbox",{staticClass:"item-checkbox",on:{change:function(o){return t.clickCheckBoxes(e)}},model:{value:e.checked,callback:function(o){t.$set(e,"checked",o)},expression:"item.checked"}})],1)}),0)],1)],1)],1)},n=[],i=o("75fc"),s=(o("ac6a"),o("795b")),r=o.n(s),l=o("cebc"),c=o("2f62"),h=o("d444"),d=10,f={name:"itemEditComp",components:{addItemClassList:h["a"]},props:{visibleFlag:Boolean},data:function(){return{activeNames:[],leftOptions:{showBackBtn:!0,preventGoBack:!0},searchKey:"",currentClass:"",itemClassList:[],itemList:[],rowActive:"",listLoading:!1,loadFinished:!0,itemListStart:0}},computed:Object(l["a"])({},Object(c["c"])({loginerShopId:function(t){return t.loginer.loginerShopId},loginerId:function(t){return t.loginer.loginerId}}),{comptedItemImgSrc:function(t){return function(t){return""}}}),watch:{visibleFlag:{handler:function(t){t&&this.refresh()},immediate:!0}},methods:{refresh:function(){var t=this;this.resetHandler(),this.getItemClass().then(function(e){t.itemClassList=e.foodsTypes,t.getItemByClass()})},resetHandler:function(){this.currentClass="",this.searchKey="",this.itemList=[]},onCloseClick:function(){this.$emit("update:visibleFlag",!1)},changeClass:function(t){this.searchKey="",this.getItemByClass()},getItemClass:function(){var t=this;return new r.a(function(e){var o={m:"getFoodTypelist"};t.$fxHttp.requestGet({url:"".concat(t.$fxBaseApi.url,"/accounts/food"),data:o}).then(function(t){e(t)})})},getItemByClass:function(t){var e=this;this.itemListStart=0,this.getItem(t).then(function(t){e.itemList=t.foodDTOData,e.setListLoading(t.foodDTOData.length)})},getItem:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.searchKey;return new r.a(function(o){var a={paged:!0,start:t.itemListStart,size:d,searchText:e,foodsSmallType:t.currentClass||null,m:"getFoodslist"};t.$fxHttp.requestGet({url:"".concat(t.$fxBaseApi.url,"/accounts/food"),data:a}).then(function(t){t.foodDTOData.forEach(function(t){t.checked=!1}),o(t)})})},search:function(t){this.searchKey=t,this.getItemByClass()},onLoadMore:function(){var t=this;this.getItem().then(function(e){var o;(o=t.itemList).push.apply(o,Object(i["a"])(e.foodDTOData)),t.setListLoading(e.foodDTOData.length)})},setListLoading:function(t){this.listLoading=!1,this.itemListStart+=d,this.loadFinished=t<d},clickCheckBoxes:function(t){this.$emit("on-confirm",t),this.$emit("update:visibleFlag",!1)}}},u=f,p=(o("93f8"),o("2877")),m=Object(p["a"])(u,a,n,!1,null,"e6c3d454",null);e["a"]=m.exports},"81b8":function(t,e,o){},8318:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"inteledi-foodSamples"},[o("w-header",{attrs:{title:"菜品留样",border:!0}},[o("headSearchBtn",{attrs:{slot:"header-right"},on:{click:t.onSearchClick},slot:"header-right"})],1),o("filterTab",{attrs:{state:t.computedState},on:{"on-state-click":t.onStateClick}}),o("div",{staticClass:"foodSamples-content"},[o("van-pull-refresh",{directives:[{name:"show",rawName:"v-show",value:0!==t.orderList.length,expression:"orderList.length !== 0"}],staticClass:"foodSamples-list",on:{refresh:t.onPullRefresh},model:{value:t.pullRefreshLoading,callback:function(e){t.pullRefreshLoading=e},expression:"pullRefreshLoading"}},[o("van-list",{attrs:{finished:t.loadFinished,"finished-text":"没有更多了",error:t.listError,"error-text":"请求失败，点击重新加载"},on:{"update:error":function(e){t.listError=e},load:t.onLoadMore},model:{value:t.listLoading,callback:function(e){t.listLoading=e},expression:"listLoading"}},t._l(t.orderList,function(e){return o("orderBlock",{key:e.id,attrs:{data:e},on:{"on-click":function(o){return t.onClickOrder(e)}}})}),1)],1),o("emptyBill",{directives:[{name:"show",rawName:"v-show",value:0===t.orderList.length,expression:"orderList.length === 0"}]})],1),o("div",{staticClass:"foodSamples-bottom"},[o("van-button",{directives:[{name:"show",rawName:"v-show",value:t.$fxAuth("foodSamplBill.save"),expression:"$fxAuth('foodSamplBill.save')"}],staticClass:"add-btn fx-no-radius",attrs:{type:"primary"},on:{click:t.onCreateClick}},[t._v("添加留样")])],1),o("van-actionsheet",{attrs:{actions:t.stateActions,"cancel-text":"取消"},on:{select:t.onStateSelect},model:{value:t.stateActionShow,callback:function(e){t.stateActionShow=e},expression:"stateActionShow"}}),o("van-popup",{staticClass:"fx-list-popup-full",attrs:{position:"right","close-on-click-overlay":!1,"lock-scroll":!1},model:{value:t.filterPopShow,callback:function(e){t.filterPopShow=e},expression:"filterPopShow"}},[o("filterPop",{attrs:{visibleFlag:t.filterPopShow,filterParams:t.filterParams},on:{"update:visibleFlag":function(e){t.filterPopShow=e},"update:visible-flag":function(e){t.filterPopShow=e},"update:filterParams":function(e){t.filterParams=e},"update:filter-params":function(e){t.filterParams=e},"on-confirm":t.onFilterConfirm}})],1)],1)},n=[],i=o("75fc"),s=o("5176"),r=o.n(s),l=o("795b"),c=o.n(l),h=(o("7514"),o("7f7f"),o("cebc")),d=(o("6762"),o("2f62")),f=o("b215"),u=o("4102"),p=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"order-block fx-shadow-block",on:{click:t.onClick}},[o("div",{staticClass:"block-title"},[o("i",{staticClass:"block-icon"}),o("span",{staticClass:"title-text"},[t._v(t._s(t.data.foodsDTO.name))]),o("stateTag",{staticClass:"state-tag",attrs:{billState:t.data.billState}})],1),o("div",{staticClass:"block-value"},[o("div",{staticClass:"order-No"},[o("span",[t._v("厨师：")]),t._v("\n\t\t\t"+t._s(t.data.cookDTO.name)+"\n\t\t")]),o("div",{staticClass:"order-date"},[o("span",[t._v("餐别：")]),o("span",[t._v(t._s(t.data.goodsMealsDTO.name))])])]),o("div",{staticClass:"block-value"},[o("div",{staticClass:"order-No"},[o("span",[t._v("留样人：")]),o("span",[t._v(t._s(t.data.samplerDTO.name))])]),o("div",{staticClass:"order-date"},[o("span",[t._v("菜谱日期：")]),o("span",[t._v(t._s(t._f("filterDateYMD")(t.data.foodDate)))]),o("van-icon",{staticClass:"order-date-arrow",attrs:{name:"arrow"}})],1)])])},m=[],v=o("59ad"),g=o.n(v),S=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("van-tag",{staticClass:"state-class",attrs:{type:t.tagType,size:"large",plain:""}},[t._v(t._s(t.billStateText))])},D=[],L=(o("c5f6"),{name:"stateTag",props:{billState:Number,reCheckState:Number},computed:{billStateText:function(){var t="";switch(this.billState){case 0:t="未处理";break;case 1:t="已处理";break}return t},tagType:function(){var t="";switch(this.billState){case 0:t="danger";break;case 1:t="success";break}return t}}}),C=L,b=(o("5fc2"),o("2877")),k=Object(b["a"])(C,S,D,!1,null,"4c84e134",null),w=k.exports,x={name:"orderBlock",components:{stateTag:w},props:{data:{type:Object,default:function(){return{}}}},computed:Object(h["a"])({},Object(d["c"])({sysPointSize:"sysPointSize"}),{toFixedNumberSize:function(t){var e=this;return function(t){return g()(e.$fxUtils.toFixedSHW(t,e.sysPointSize))}}}),methods:{onClick:function(){this.$emit("on-click",this.data)}}},y=x,I=(o("92e7"),Object(b["a"])(y,p,m,!1,null,"4dae1b62",null)),P=I.exports,O=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"filter-popup"},[o("w-header",{attrs:{title:"筛选条件",leftOptions:t.leftOptions},on:{"on-click-back":t.onCloseClick}}),o("div",{ref:"filterContent",staticClass:"filter-content"},[o("van-cell-group",[o("van-cell",{attrs:{title:"菜谱日期"}}),o("van-cell",{attrs:{title:"起始时间",value:t.beginDate,"is-link":""},on:{click:t.onBeginDateClick}}),o("van-cell",{attrs:{title:"结束时间",value:t.endDate,"is-link":""},on:{click:t.endDateClick}}),o("van-cell",{attrs:{title:"厨师",value:t.chef,"value-class":"info-item-value","is-link":""},on:{click:t.onChefClick}}),o("van-cell",{attrs:{title:"餐别",value:t.meals,"value-class":"info-item-value","is-link":""},on:{click:t.onMealsClick}}),o("van-cell",{attrs:{title:"菜品名称",value:t.food,"value-class":"info-item-value","is-link":""},on:{click:t.onFoodClick}})],1)],1),o("div",{staticClass:"filter-bottom"},[o("van-button",{staticClass:"reset-btn fx-no-radius",attrs:{type:"info"},on:{click:t.onResetClick}},[t._v("重置")]),o("van-button",{staticClass:"confirm-btn fx-no-radius",attrs:{type:"primary"},on:{click:t.onConfirmClick}},[t._v("确定")])],1),o("van-popup",{attrs:{position:"bottom"},model:{value:t.datePickerShow,callback:function(e){t.datePickerShow=e},expression:"datePickerShow"}},[o("w-date-picker",{attrs:{visibleFlag:t.datePickerShow,currentDate:t.currentDate},on:{"update:visibleFlag":function(e){t.datePickerShow=e},"update:visible-flag":function(e){t.datePickerShow=e},confirm:t.dateConfirmhandle}})],1),o("van-popup",{staticClass:"fx-list-popup-300",attrs:{position:"right","lock-scroll":!1},model:{value:t.chefPopShow,callback:function(e){t.chefPopShow=e},expression:"chefPopShow"}},[o("listComp",{attrs:{visibleFlag:t.chefPopShow,data:t.chefList,loadFinished:t.chefListLoadFinished,loading:t.onChefLoading,title:"厨师检索"},on:{"update:visibleFlag":function(e){t.chefPopShow=e},"update:visible-flag":function(e){t.chefPopShow=e},"update:loading":function(e){t.onChefLoading=e},"on-search":t.searchChef,"on-select":t.selectChef,"on-load":t.onChefLoad}})],1),o("van-popup",{staticClass:"fx-list-popup-300",attrs:{position:"right","lock-scroll":!1},model:{value:t.mealsPopShow,callback:function(e){t.mealsPopShow=e},expression:"mealsPopShow"}},[o("listComp",{attrs:{visibleFlag:t.mealsPopShow,data:t.mealsList,loadFinished:t.mealsListLoadFinished,loading:t.onMealsLoading,title:"餐别检索"},on:{"update:visibleFlag":function(e){t.mealsPopShow=e},"update:visible-flag":function(e){t.mealsPopShow=e},"update:loading":function(e){t.onMealsLoading=e},"on-search":t.searchMeals,"on-select":t.selectMeals,"on-load":t.onMealsLoad}})],1),o("van-popup",{staticClass:"fx-list-popup-300",attrs:{position:"right","lock-scroll":!1},model:{value:t.foodPopShow,callback:function(e){t.foodPopShow=e},expression:"foodPopShow"}},[o("listComp",{attrs:{visibleFlag:t.foodPopShow,data:t.foodList,loadFinished:t.foodListLoadFinished,loading:t.onFoodLoading,title:"菜品检索"},on:{"update:visibleFlag":function(e){t.foodPopShow=e},"update:visible-flag":function(e){t.foodPopShow=e},"update:loading":function(e){t.onFoodLoading=e},"on-search":t.searchFood,"on-select":t.selectFood,"on-load":t.onFoodLoad}})],1)],1)},F=[],T=o("f6bb"),$=50,B={name:"filterPop",components:{listComp:T["a"]},props:{visibleFlag:Boolean,filterParams:{type:Object,default:function(){return{}}}},data:function(){return{leftOptions:{showBackBtn:!0,preventGoBack:!0},chefListStart:0,chefListLoadFinished:!1,onChefLoading:!1,chefPopShow:!1,chefList:[],chefKeyword:null,chef:"请选择",chefId:"",mealsListStart:0,mealsListLoadFinished:!1,onMealsLoading:!1,mealsPopShow:!1,mealsList:[],mealsKeyword:null,meals:"请选择",mealsId:"",foodListStart:0,foodListLoadFinished:!1,onFoodLoading:!1,foodPopShow:!1,foodList:[],foodKeyword:null,food:"请选择",foodId:"",datePickerShow:!1,currentDate:new Date,beginDate:this.$fxCommon.orderFilterStartDate(),endDate:this.$fxCommon.orderFilterEndDate(),dateType:""}},watch:{visibleFlag:{handler:function(t){t&&this.$fxUtils.isEmptyObjSHW(this.filterParams)&&this.resetHandler()},immediate:!0}},computed:Object(h["a"])({},Object(d["c"])({loginerShopId:function(t){return t.loginer.loginerShopId},loginerId:function(t){return t.loginer.loginerId}})),methods:{onCloseClick:function(){this.$emit("update:visibleFlag",!1)},onConfirmClick:function(){this.$emit("update:visibleFlag",!1),this.$emit("on-confirm",this.getFilterParams()),this.$emit("update:filterParams",this.getFilterParams())},getFilterParams:function(){return{beginDate:this.beginDate||this.$fxCommon.orderFilterStartDate(),endDate:this.endDate||this.$fxCommon.orderFilterEndDate(),chefId:this.chefId,mealsId:this.mealsId,foodId:this.foodId}},onResetClick:function(){this.resetHandler()},resetHandler:function(){this.beginDate=this.$fxCommon.orderFilterStartDate(),this.endDate=this.$fxCommon.orderFilterEndDate(),this.chefListStart=0,this.chef="请选择",this.chefId="",this.chefKeyword=null,this.mealsListStart=0,this.meals="请选择",this.mealsId="",this.mealsKeyword=null,this.foodListStart=0,this.food="请选择",this.foodId="",this.foodKeyword=null},onChefClick:function(){this.chefKeyword=null,this.chefListLoadFinished=!1,this.onChefRefresh()},searchChef:function(t){this.chefKeyword=t,this.onChefRefresh()},selectChef:function(t){this.chef=t.name,this.chefId=t.id},onChefLoad:function(){var t=this;this.getChefListData().then(function(e){var o;(o=t.chefList).push.apply(o,Object(i["a"])(e.employeeDTOData))})},onChefRefresh:function(){var t=this;this.chefListStart=0,this.getChefListData().then(function(e){t.chefPopShow=!0,t.chefList=e.employeeDTOData})},getChefListData:function(){var t=this;return new c.a(function(e){var o={start:t.chefListStart,size:$,keyword:t.chefKeyword,paged:!0,m:"getChef"};t.$fxHttp.requestGet({url:"".concat(t.$fxBaseApi.url,"/accounts/food/shop/").concat(t.loginerShopId,"/users/").concat(t.loginerId),data:o}).then(function(o){t.onChefLoading=!1,t.chefListStart+=$,o.employeeDTOData.length<$?t.chefListLoadFinished=!0:t.chefListLoadFinished=!1,e(o)})})},onMealsClick:function(){this.mealsKeyword=null,this.mealsListLoadFinished=!1,this.onMealsRefresh()},searchMeals:function(t){this.mealsKeyword=t,this.onMealsRefresh()},selectMeals:function(t){this.meals=t.name,this.mealsId=t.id},onMealsLoad:function(){var t=this;this.getMealsListData().then(function(e){var o;(o=t.mealsList).push.apply(o,Object(i["a"])(e.goodsMealsDTOData))})},onMealsRefresh:function(){var t=this;this.mealsListStart=0,this.getMealsListData().then(function(e){t.mealsPopShow=!0,t.mealsList=e.goodsMealsDTOData})},getMealsListData:function(){var t=this;return new c.a(function(e){var o={start:t.mealsListStart,size:$,keyword:t.mealsKeyword,paged:!0,m:"getMeals"};t.$fxHttp.requestGet({url:"".concat(t.$fxBaseApi.url,"/accounts/food"),data:o}).then(function(o){t.onMealsLoading=!1,t.mealsListStart+=$,o.goodsMealsDTOData.length<$?t.mealsListLoadFinished=!0:t.mealsListLoadFinished=!1,e(o)})})},onFoodClick:function(){this.foodKeyword=null,this.onFoodRefresh()},searchFood:function(t){this.foodKeyword=t,this.onFoodRefresh(t)},selectFood:function(t){this.food=t.name,this.foodId=t.id},onFoodRefresh:function(){var t=this;this.foodListStart=0,this.getFoodListData().then(function(e){t.foodPopShow=!0,t.foodList=e.foodDTOData})},onFoodLoad:function(){var t=this;this.getFoodListData().then(function(e){var o;(o=t.foodList).push.apply(o,Object(i["a"])(e.foodDTOData))})},getFoodListData:function(){var t=this;return new c.a(function(e){var o={start:t.foodListStart,size:$,paged:!0,searchText:t.foodKeyword,m:"getFoodslist",allFlag:"on"};t.$fxHttp.requestGet({url:"".concat(t.$fxBaseApi.url,"/accounts/food"),data:o}).then(function(o){t.onFoodLoading=!1,t.foodListStart+=$,o.foodDTOData.length<$?t.foodListLoadFinished=!0:t.foodListLoadFinished=!1,e(o)})})},onBeginDateClick:function(){this.dateType="begin",this.beginDate&&(this.currentDate=new Date(this.beginDate)),this.datePickerShow=!0},endDateClick:function(){this.dateType="end",this.endDate&&(this.currentDate=new Date(this.endDate)),this.datePickerShow=!0},dateConfirmhandle:function(t){"begin"===this.dateType?(this.beginDate=this.$fxUtils.setDateTime(t,"时分"),this.endDate&&this.$fxCommon.orderFilterRangeDate(this.beginDate,this.endDate)||(this.endDate=this.$fxCommon.orderFilterDate(t))):(this.endDate=this.$fxUtils.setDateTime(t,"时分"),this.beginDate&&this.$fxCommon.orderFilterRangeDate(this.beginDate,this.endDate)||(this.beginDate=this.$fxCommon.orderFilterStartDate(t))),this.datePickerShow=!1}}},M=B,_=(o("1a83"),Object(b["a"])(M,O,F,!1,null,"4aae27c1",null)),E=_.exports,A=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"foodSamples-filter fx-shadow-down"},[o("div",{staticClass:"filter-state",on:{click:t.onStateClick}},[o("span",[t._v("状态")]),o("van-icon",{staticClass:"filter-arrow",attrs:{name:"arrow-down"}}),o("span",[t._v(t._s(t.state))])],1),o("div",{staticClass:"filter-reCheckState"})])},j=[],R={name:"filterTab",props:{state:String,reCheckState:String},methods:{onStateClick:function(){this.$emit("on-state-click")}}},H=R,q=(o("974d"),Object(b["a"])(H,A,j,!1,null,"f2eecda2",null)),N=q.exports,K=50,z={name:"foodSamples",components:{headSearchBtn:f["a"],emptyBill:u["a"],orderBlock:P,filterPop:E,filterTab:N},data:function(){return{orderList:[],filterPopShow:!1,filterState:null,stateActionShow:!1,stateActions:[{id:null,name:"全部"},{id:"0",name:"未处理"},{id:"1",name:"已处理"}],listStart:0,pullRefreshLoading:!1,listLoading:!1,loadFinished:!0,listError:!1,filterParams:{}}},beforeRouteEnter:function(t,e,o){var a=["/main/home","/"],n=["/foodSamplesDetails"];a.includes(e.path)?o(function(t){t.restFilterParams(),t.refreshOrderList()}):n.includes(e.path)?o(function(t){t.refreshOrderList()}):o()},computed:Object(h["a"])({},Object(d["c"])({billListPostParams:"billListPostParams",loginerShopId:function(t){return t.loginer.loginerShopId},loginerId:function(t){return t.loginer.loginerId}}),{computedState:function(){var t=this;return this.stateActions.find(function(e){return e.id===t.filterState}).name}}),methods:{orderListPostHandler:function(t){var e=this;return new c.a(function(o){e.$store.commit({type:"SETSTATE",billListPostParams:t}),e.$fxHttp.requestPost({url:"".concat(e.$fxBaseApi.url,"/accounts/").concat(e.loginerShopId,"/foodsampls/users/").concat(e.loginerId),data:t}).then(function(t){e.listLoading=!1,o(t)})})},refreshOrderList:function(){var t=this;return new c.a(function(e){t.listStart=0;var o={start:t.listStart,size:K,paged:!0,businessDateStart:t.$fxCommon.orderFilterStartDate(),businessDateEnd:t.$fxCommon.orderFilterEndDate(),billState:t.filterState};o=r()(o,t.translateFilterParams(t.filterParams)),t.orderListPostHandler(o).then(function(o){t.orderList=o.foodSamples,e(o)})})},translateFilterParams:function(t){return this.$fxUtils.isEmptyObjSHW(t)?{}:{businessDateStart:t.beginDate,businessDateEnd:t.endDate,cookId:""===t.chefId?null:t.chefId,goodsMealsId:""===t.mealsId?null:t.mealsId,foodsId:""===t.foodId?null:t.foodId}},onFilterConfirm:function(t){var e=this;this.listStart=0;var o={start:this.listStart,size:K,paged:!0,businessDateStart:t.beginDate,businessDateEnd:t.endDate,billState:this.filterState,cookId:""===t.chefId?null:t.chefId,goodsMealsId:""===t.mealsId?null:t.mealsId,foodsId:""===t.foodId?null:t.foodId};this.orderListPostHandler(o).then(function(t){e.orderList=t.foodSamples})},onPullRefresh:function(){var t=this;this.refreshOrderList().then(function(e){t.pullRefreshLoading=!1})},onLoadMore:function(){var t=this,e=r()(this.billListPostParams,{start:this.listStart});this.orderListPostHandler(e).then(function(e){var o;(o=t.orderList).push.apply(o,Object(i["a"])(e.foodSamples))})},onSearchClick:function(){this.filterPopShow=!0},onStateClick:function(){this.stateActionShow=!0},onStateSelect:function(t){this.filterState=t.id,this.stateActionShow=!1,this.refreshOrderList()},onClickOrder:function(t){this.$router.push({path:"foodSamplesDetails",query:{orderId:t.id}})},onCreateClick:function(){this.$router.push("createFoodSamples")},restFilterParams:function(){this.filterParams={},this.filterState=null}}},U=z,G=(o("09b5"),Object(b["a"])(U,a,n,!1,null,"6aec0e54",null));e["default"]=G.exports},"8b31":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"inteledi-foodSamples"},[o("w-header",{attrs:{title:"新增留样",border:!0}}),o("div",{staticClass:"foodSamples-content"},[o("div",{staticClass:"foodSamples-filter"},[o("OrderInfo",{attrs:{data:t.orderInfoData},on:{"on-shop-click":t.onShopClick,"on-food-click":t.onFoodClick,"on-meals-click":t.onMealsClick,"on-foodDate-click":t.onFoodDateClick,"on-chef-click":t.onChefClick}})],1),o("div",{staticClass:"img-wrap"},[o("span",{staticClass:"img-title"},[t._v("留样图片")]),o("div",{staticClass:"photo-wrap"},[t.orderInfoData.base64Str?o("div",[o("van-icon",{staticClass:"img-del",attrs:{color:"#FC4E49",size:"20px",name:"clear"},on:{click:t.onDeleteImgClick}}),o("img",{staticClass:"uploader-img",attrs:{src:t.orderInfoData.base64Str,onerror:t.$fxCommon.errorImg(t.orderInfoData.base64Str)}})],1):o("div",{staticClass:"upload-photo",on:{click:t.onUploadClick}})])])]),o("div",{staticClass:"foodSamples-bottom"},[o("van-button",{directives:[{name:"show",rawName:"v-show",value:t.$fxAuth("foodSamplBill.save"),expression:"$fxAuth('foodSamplBill.save')"}],staticClass:"save-btn",attrs:{type:"primary"},on:{click:t.onSaveClick}},[t._v("保存")])],1),o("van-popup",{attrs:{position:"bottom"},model:{value:t.datePickerShow,callback:function(e){t.datePickerShow=e},expression:"datePickerShow"}},[o("w-date-picker",{attrs:{visibleFlag:t.datePickerShow,currentDate:t.currentDate},on:{"update:visibleFlag":function(e){t.datePickerShow=e},"update:visible-flag":function(e){t.datePickerShow=e},confirm:t.dateConfirmhandle}})],1),o("van-popup",{staticClass:"fx-list-popup-300",attrs:{position:"right","lock-scroll":!1},model:{value:t.shopPopShow,callback:function(e){t.shopPopShow=e},expression:"shopPopShow"}},[o("listComp",{attrs:{visibleFlag:t.shopPopShow,data:t.shopList,loadFinished:t.shopListLoadFinished,loading:t.onShopLoading,title:"机构检索"},on:{"update:visibleFlag":function(e){t.shopPopShow=e},"update:visible-flag":function(e){t.shopPopShow=e},"update:loading":function(e){t.onShopLoading=e},"on-search":t.searchShop,"on-select":t.selectShop,"on-load":t.onShopLoad}})],1),o("van-popup",{staticClass:"fx-list-popup-300",attrs:{position:"right","lock-scroll":!1},model:{value:t.mealsPopShow,callback:function(e){t.mealsPopShow=e},expression:"mealsPopShow"}},[o("listComp",{attrs:{visibleFlag:t.mealsPopShow,data:t.mealsList,loadFinished:t.mealsListLoadFinished,loading:t.onMealsLoading,title:"餐别检索"},on:{"update:visibleFlag":function(e){t.mealsPopShow=e},"update:visible-flag":function(e){t.mealsPopShow=e},"update:loading":function(e){t.onMealsLoading=e},"on-search":t.searchMeals,"on-select":t.selectMeals,"on-load":t.onMealsLoad}})],1),o("van-popup",{staticClass:"fx-list-popup-300",attrs:{position:"right","lock-scroll":!1},model:{value:t.chefPopShow,callback:function(e){t.chefPopShow=e},expression:"chefPopShow"}},[o("listComp",{attrs:{visibleFlag:t.chefPopShow,data:t.chefList,loadFinished:t.chefListLoadFinished,loading:t.onChefLoading,title:"厨师检索"},on:{"update:visibleFlag":function(e){t.chefPopShow=e},"update:visible-flag":function(e){t.chefPopShow=e},"update:loading":function(e){t.onChefLoading=e},"on-search":t.searchChef,"on-select":t.selectChef,"on-load":t.onChefLoad}})],1),o("van-popup",{staticClass:"fx-list-popup-full",attrs:{position:"right","close-on-click-overlay":!1,"lock-scroll":!1},model:{value:t.itemPopShow,callback:function(e){t.itemPopShow=e},expression:"itemPopShow"}},[o("itemEditComp",{attrs:{visibleFlag:t.itemPopShow,shopId:t.orderInfoData.shopDTO.id},on:{"update:visibleFlag":function(e){t.itemPopShow=e},"update:visible-flag":function(e){t.itemPopShow=e},"on-confirm":t.onItemEditConfirm}})],1),o("van-actionsheet",{attrs:{actions:t.uploadActions,"cancel-text":"取消"},on:{select:t.onUploadSelect},model:{value:t.uploadActionShow,callback:function(e){t.uploadActionShow=e},expression:"uploadActionShow"}})],1)},n=[],i=(o("a481"),o("795b")),s=o.n(i),r=o("75fc"),l=o("cebc"),c=o("2f62"),h=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"filter-info-popup fx-shadow-block"},[o("van-cell-group",[o("van-cell",{attrs:{title:"机构名称",value:t.data.shopDTO&&t.data.shopDTO.name,"value-class":"info-item-value","is-link":""},on:{click:function(e){return t.onEmitClick("on-shop-click")}}}),o("van-cell",{attrs:{title:"菜谱日期",value:t.formatterDate(t.data.foodDate),"is-link":""},on:{click:function(e){return t.onEmitClick("on-foodDate-click")}}}),o("van-cell",{attrs:{title:"餐别",value:t.data.goodsMealsDTO&&t.data.goodsMealsDTO.name,"value-class":"info-item-value","is-link":""},on:{click:function(e){return t.onEmitClick("on-meals-click")}}}),o("van-cell",{attrs:{title:"菜品名称",value:t.data.foodsDTO&&t.data.foodsDTO.name,"is-link":""},on:{click:function(e){return t.onEmitClick("on-food-click")}}}),o("van-cell",{attrs:{title:"厨师",value:t.data.cookDTO&&t.data.cookDTO.name,"value-class":"info-item-value","is-link":""},on:{click:function(e){return t.onEmitClick("on-chef-click")}}}),o("van-pro-number-field",{attrs:{label:"留样重量(克)","input-align":"right",min:"0",max:t.maxAmount,defaultValue:0,intLength:t.numberLength,pointSize:t.sysPointSize},model:{value:t.data.amount,callback:function(e){t.$set(t.data,"amount",e)},expression:"data.amount"}})],1)],1)},d=[],f={name:"filterInfo",props:{data:{type:Object,default:function(){return{}}}},computed:Object(l["a"])({},Object(c["c"])({sysPointSize:"sysPointSize",numberLength:"numberLength",maxAmount:"maxAmount"}),{formatterDate:function(t){var e=this;return function(t){return"number"===typeof t?e.$fxUtils.setDateTime(new Date(t),"时分"):""}}}),methods:{onEmitClick:function(t){this.$emit(t)}}},u=f,p=(o("100a"),o("2877")),m=Object(p["a"])(u,h,d,!1,null,"70f58bb6",null),v=m.exports,g=o("f6bb"),S=o("75f3"),D=50,L={name:"createFoodSamples",components:{OrderInfo:v,listComp:g["a"],itemEditComp:S["a"]},data:function(){return{listStart:0,pullRefreshLoading:!1,currentDate:new Date,orderInfoData:{foodDate:(new Date).getTime(),shopDTO:{},goodsMealsDTO:{},foodsDTO:{},cookDTO:{},base64Str:""},datePickerShow:!1,shopPopShow:!1,shopList:[],shopListStart:0,onShopLoading:!1,shopListLoadFinished:!1,mealsPopShow:!1,mealsList:[],mealsListStart:0,onMealsLoading:!1,mealsListLoadFinished:!1,chefPopShow:!1,chefList:[],chefListStart:0,onChefLoading:!1,chefListLoadFinished:!1,itemPopShow:!1,uploadActionShow:!1,uploadActions:[{id:0,name:"拍摄"},{id:1,name:"从手机相册选择"}]}},created:function(){var t=this;this.getShopListData().then(function(e){e&&e.shops&&e.shops.length&&t.$set(t.orderInfoData,"shopDTO",e.shops[0])})},computed:Object(l["a"])({},Object(c["c"])({loginerShopId:function(t){return t.loginer.loginerShopId},loginerShopName:function(t){return t.loginer.loginerShopName},loginerId:function(t){return t.loginer.loginerId}})),methods:{onFoodDateClick:function(){this.foodDate&&(this.currentDate=new Date(this.foodDate)),this.datePickerShow=!0},dateConfirmhandle:function(t){this.orderInfoData.foodDate=t.getTime(),this.datePickerShow=!1},onFoodClick:function(){if(!this.orderInfoData.shopDTO.id)return this.$fxToast.fail("请选择机构!"),!1;this.itemPopShow=!0},onShopClick:function(){this.onShopRefresh()},searchShop:function(t){this.onShopRefresh(t)},selectShop:function(t){if(t.id===this.orderInfoData.shopDTO.id)return!0;this.orderInfoData.shopDTO=t},onShopRefresh:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.shopListStart=0,this.getShopListData(e).then(function(e){t.shopPopShow=!0,t.onShopLoading=!1,t.shopListStart+=D,t.shopListLoadFinished=e.shops.length<D,t.shopList=e.shops})},onShopLoad:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.getShopListData(e).then(function(e){var o;t.onShopLoading=!1,t.shopListStart+=D,t.shopListLoadFinished=e.shops.length<D,(o=t.shopList).push.apply(o,Object(r["a"])(e.shops))})},getShopListData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new s.a(function(o){var a={start:t.shopListStart,size:D,paged:!0,keyword:e,orgFlag:0,m:"getShopListForUserhouse",billType:"foodSample"};t.$fxHttp.requestGet({url:"".concat(t.$fxBaseApi.url,"/accounts/").concat(t.loginerShopId,"/users/").concat(t.loginerId,"/shops"),data:a}).then(function(t){o(t)})})},onMealsClick:function(){this.onMealsRefresh()},searchMeals:function(t){this.onMealsRefresh(t)},selectMeals:function(t){if(t.id===this.orderInfoData.goodsMealsDTO.id)return!0;this.orderInfoData.goodsMealsDTO=t},onMealsRefresh:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.mealsListStart=0,this.getMealsListData(e).then(function(e){t.mealsPopShow=!0,t.onMealsLoading=!1,t.mealsListStart+=D,t.mealsListLoadFinished=e.goodsMealsDTOData.length<D,t.mealsList=e.goodsMealsDTOData})},onMealsLoad:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.getMealsListData(e).then(function(e){var o;t.onMealsLoading=!1,t.mealsListStart+=D,t.mealsListLoadFinished=e.goodsMealsDTOData.length<D,(o=t.mealsList).push.apply(o,Object(r["a"])(e.goodsMealsDTOData))})},getMealsListData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new s.a(function(o){var a={start:t.mealsListStart,size:D,paged:!0,keyword:e,m:"getMeals"};t.$fxHttp.requestGet({url:"".concat(t.$fxBaseApi.url,"/accounts/food"),data:a}).then(function(t){o(t)})})},onChefClick:function(){if(!this.orderInfoData.shopDTO.id)return this.$fxToast.fail("请选择机构!"),!1;this.onChefRefresh()},searchChef:function(t){this.onChefRefresh(t)},selectChef:function(t){if(t.id===this.orderInfoData.cookDTO.id)return!0;this.orderInfoData.cookDTO=t},onChefRefresh:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.chefListStart=0,this.getChefListData(e).then(function(e){t.chefPopShow=!0,t.onChefLoading=!1,t.chefListStart+=D,t.chefListLoadFinished=e.employeeDTOData.length<D,t.chefList=e.employeeDTOData})},onChefLoad:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.getChefListData(e).then(function(e){var o;t.onChefLoading=!1,t.chefListStart+=D,t.chefListLoadFinished=e.employeeDTOData.length<D,(o=t.chefList).push.apply(o,Object(r["a"])(e.employeeDTOData))})},getChefListData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new s.a(function(o){var a={orgId:t.orderInfoData.shopDTO.id,start:t.chefListStart,size:D,paged:!0,keyword:e,m:"getChef"};t.$fxHttp.requestGet({url:"".concat(t.$fxBaseApi.url,"/accounts/food/shop/").concat(t.loginerShopId,"/users/").concat(t.loginerId),data:a}).then(function(t){o(t)})})},onSaveClick:function(){var t=this;this.checkOrderInfo().then(function(){t.$dialog.confirm({title:"提示",message:"确定生成单据吗?"}).then(function(){var e=t.getSaveParams();t.createHandler(e)}).catch(function(){})})},createHandler:function(t){var e=this;this.$fxHttp.requestPost({url:"".concat(this.$fxBaseApi.url,"/accounts/").concat(this.loginerShopId,"/foodsampls/users/").concat(this.loginerId," "),data:t,query:{m:"addBill"}}).then(function(t){e.$fxToast.success("生成单据成功").then(function(){e.$router.replace({path:"foodSamplesDetails",query:{orderId:t.foodSamples[0].id}})})})},getSaveParams:function(){return this.orderInfoData},checkOrderInfo:function(){var t=this;return new s.a(function(e,o){for(var a=[[t.orderInfoData.shopDTO.id,"机构"],[t.orderInfoData.goodsMealsDTO.id,"餐别"],[t.orderInfoData.foodsDTO.id,"菜品"],[t.orderInfoData.cookDTO.id,"厨师"]],n=!0,i=0;i<a.length;i++)if(!a[i][0]){t.$fxToast.top("请选择".concat(a[i][1],"！")),n=!1;break}n&&e()})},onItemEditConfirm:function(t){this.orderInfoData.foodsDTO=t},onUploadClick:function(){this.uploadActionShow=!0},onUploadSelect:function(t){var e=this;this.uploadActionShow=!1,0===t.id?this.$fxCordova.camera.getPictureByCamera().then(function(t){e.orderInfoData.base64Str="data:image/jpeg;base64,"+t}):this.$fxCordova.camera.getPictureByLibrary().then(function(t){e.orderInfoData.base64Str="data:image/jpeg;base64,"+t})},onDeleteImgClick:function(){this.orderInfoData.base64Str=""}}},C=L,b=(o("4807"),Object(p["a"])(C,a,n,!1,null,"13fcfb06",null));e["default"]=b.exports},"8ceb":function(t,e,o){"use strict";var a=o("e515"),n=o.n(a);n.a},"8d5d":function(t,e,o){"use strict";var a=o("08d9"),n=o.n(a);n.a},"92e7":function(t,e,o){"use strict";var a=o("d280"),n=o.n(a);n.a},"93f8":function(t,e,o){"use strict";var a=o("62b4"),n=o.n(a);n.a},"96cf":function(t,e,o){var a=function(t){"use strict";var e,o=Object.prototype,a=o.hasOwnProperty,n="function"===typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",r=n.toStringTag||"@@toStringTag";function l(t,e,o,a){var n=e&&e.prototype instanceof m?e:m,i=Object.create(n.prototype),s=new P(a||[]);return i._invoke=w(t,o,s),i}function c(t,e,o){try{return{type:"normal",arg:t.call(e,o)}}catch(a){return{type:"throw",arg:a}}}t.wrap=l;var h="suspendedStart",d="suspendedYield",f="executing",u="completed",p={};function m(){}function v(){}function g(){}var S={};S[i]=function(){return this};var D=Object.getPrototypeOf,L=D&&D(D(O([])));L&&L!==o&&a.call(L,i)&&(S=L);var C=g.prototype=m.prototype=Object.create(S);function b(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function k(t){function e(o,n,i,s){var r=c(t[o],t,n);if("throw"!==r.type){var l=r.arg,h=l.value;return h&&"object"===typeof h&&a.call(h,"__await")?Promise.resolve(h.__await).then(function(t){e("next",t,i,s)},function(t){e("throw",t,i,s)}):Promise.resolve(h).then(function(t){l.value=t,i(l)},function(t){return e("throw",t,i,s)})}s(r.arg)}var o;function n(t,a){function n(){return new Promise(function(o,n){e(t,a,o,n)})}return o=o?o.then(n,n):n()}this._invoke=n}function w(t,e,o){var a=h;return function(n,i){if(a===f)throw new Error("Generator is already running");if(a===u){if("throw"===n)throw i;return F()}o.method=n,o.arg=i;while(1){var s=o.delegate;if(s){var r=x(s,o);if(r){if(r===p)continue;return r}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(a===h)throw a=u,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);a=f;var l=c(t,e,o);if("normal"===l.type){if(a=o.done?u:d,l.arg===p)continue;return{value:l.arg,done:o.done}}"throw"===l.type&&(a=u,o.method="throw",o.arg=l.arg)}}}function x(t,o){var a=t.iterator[o.method];if(a===e){if(o.delegate=null,"throw"===o.method){if(t.iterator["return"]&&(o.method="return",o.arg=e,x(t,o),"throw"===o.method))return p;o.method="throw",o.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=c(a,t.iterator,o.arg);if("throw"===n.type)return o.method="throw",o.arg=n.arg,o.delegate=null,p;var i=n.arg;return i?i.done?(o[t.resultName]=i.value,o.next=t.nextLoc,"return"!==o.method&&(o.method="next",o.arg=e),o.delegate=null,p):i:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,p)}function y(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(y,this),this.reset(!0)}function O(t){if(t){var o=t[i];if(o)return o.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,s=function o(){while(++n<t.length)if(a.call(t,n))return o.value=t[n],o.done=!1,o;return o.value=e,o.done=!0,o};return s.next=s}}return{next:F}}function F(){return{value:e,done:!0}}return v.prototype=C.constructor=g,g.constructor=v,g[r]=v.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,r in t||(t[r]="GeneratorFunction")),t.prototype=Object.create(C),t},t.awrap=function(t){return{__await:t}},b(k.prototype),k.prototype[s]=function(){return this},t.AsyncIterator=k,t.async=function(e,o,a,n){var i=new k(l(e,o,a,n));return t.isGeneratorFunction(o)?i:i.next().then(function(t){return t.done?t.value:i.next()})},b(C),C[r]="Generator",C[i]=function(){return this},C.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var o in t)e.push(o);return e.reverse(),function o(){while(e.length){var a=e.pop();if(a in t)return o.value=a,o.done=!1,o}return o.done=!0,o}},t.values=O,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var o in this)"t"===o.charAt(0)&&a.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var o=this;function n(a,n){return r.type="throw",r.arg=t,o.next=a,n&&(o.method="next",o.arg=e),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],r=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var l=a.call(s,"catchLoc"),c=a.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.finallyLoc===t)return this.complete(o.completion,o.afterLoc),I(o),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc===t){var a=o.completion;if("throw"===a.type){var n=a.arg;I(o)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,o,a){return this.delegate={iterator:O(t),resultName:o,nextLoc:a},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=a}catch(n){Function("r","regeneratorRuntime = r")(a)}},"974d":function(t,e,o){"use strict";var a=o("6422"),n=o.n(a);n.a},"9f7f":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"filter-popup"},[o("w-header",{attrs:{title:"编辑留样",border:!0}}),o("div",{ref:"filterContent",staticClass:"filter-content"},[o("van-cell-group",[o("van-cell",{attrs:{title:"留样编号",value:t.orderInfoData.sysBillCode}}),o("van-cell",{attrs:{title:"机构名称",value:t.orderInfoData.shopDTO&&t.orderInfoData.shopDTO.name,"value-class":"info-item-value"},on:{click:function(e){return t.changeInfo("onShopClick")}}}),o("van-cell",{attrs:{title:"菜谱日期",value:t.formatterDate(t.orderInfoData.foodDate),"is-link":t.isBillState(0)},on:{click:function(e){return t.changeInfo("onFoodDateClick")}}}),o("van-cell",{attrs:{title:"餐别",value:t.orderInfoData.goodsMealsDTO&&t.orderInfoData.goodsMealsDTO.name,"value-class":"info-item-value","is-link":t.isBillState(0)},on:{click:function(e){return t.changeInfo("onMealsClick")}}}),o("van-cell",{attrs:{title:"菜品名称",value:t.orderInfoData.foodsDTO&&t.orderInfoData.foodsDTO.name,"value-class":"info-item-value","is-link":t.isBillState(0)},on:{click:function(e){return t.changeInfo("onFoodClick")}}}),o("van-cell",{attrs:{title:"厨师",value:t.orderInfoData.cookDTO&&t.orderInfoData.cookDTO.name,"value-class":"info-item-value","is-link":t.isBillState(0)},on:{click:function(e){return t.changeInfo("onChefClick")}}}),o("van-pro-number-field",{staticClass:"info-item-amount",attrs:{label:"留样重量(克)","input-align":"right",min:"0",max:t.maxAmount,defaultValue:0,intLength:t.numberLength,pointSize:t.sysPointSize},model:{value:t.orderInfoData.amount,callback:function(e){t.$set(t.orderInfoData,"amount",e)},expression:"orderInfoData.amount"}}),o("van-cell",{attrs:{title:"留样员",value:t.orderInfoData.samplerDTO&&t.orderInfoData.samplerDTO.name,"value-class":"info-item-value"}}),o("van-cell",{attrs:{title:"留样时间",value:t.formatterDate(t.orderInfoData.samplDate),"value-class":"info-item-value"}}),o("van-cell",{attrs:{title:"留样图片",border:!1,"value-class":"info-item-value"}}),o("van-cell",{staticClass:"info-cell-img",attrs:{"value-class":"info-item-img"}},[o("div",{staticClass:"photo-wrap"},[!t.imgSrc&&t.isBillState(0)?o("div",{staticClass:"upload-photo",on:{click:function(e){return t.changeInfo("onUploadClick")}}}):o("div",[t.isBillState(0)?o("van-icon",{staticClass:"img-del",attrs:{color:"#FC4E49",size:"20px",name:"clear"},on:{click:function(e){return t.changeInfo("onDeleteImgClick")}}}):t._e(),t.imgSrc?o("img",{staticClass:"uploader-img",attrs:{src:t.imgSrc,onerror:t.$fxCommon.errorImg(t.imgSrc)}}):t._e()],1)])])],1)],1),o("div",{staticClass:"filter-bottom"},[o("van-button",{directives:[{name:"show",rawName:"v-show",value:t.$fxAuth("foodSamplBill.print"),expression:"$fxAuth('foodSamplBill.print')"}],staticClass:"print-btn fx-no-radius",on:{click:t.onPrintClick}},[t._v("打印")]),o("van-button",{directives:[{name:"show",rawName:"v-show",value:t.$fxAuth("foodSamplBill.save")&&t.isBillState(0),expression:"$fxAuth('foodSamplBill.save') && isBillState(0)"}],staticClass:"bottom-btn fx-no-radius",attrs:{type:"info"},on:{click:function(e){return t.onClickHandler("onSaveClick")}}},[t._v("保存")]),o("van-button",{directives:[{name:"show",rawName:"v-show",value:t.$fxAuth("foodSamplBill.process")&&t.isBillState(0),expression:"$fxAuth('foodSamplBill.process') && isBillState(0)"}],staticClass:"bottom-btn fx-no-radius",attrs:{type:"primary"},on:{click:function(e){return t.onClickHandler("onExpressClick")}}},[t._v("处理")]),o("van-button",{directives:[{name:"show",rawName:"v-show",value:t.$fxAuth("foodSamplBill.cancelprocess")&&t.isBillState(1),expression:"$fxAuth('foodSamplBill.cancelprocess') && isBillState(1)"}],staticClass:"bottom-btn fx-no-radius",attrs:{type:"danger"},on:{click:t.onUnExpressClick}},[t._v("取消处理")]),o("van-button",{directives:[{name:"show",rawName:"v-show",value:t.$fxAuth("foodSamplBill.del")&&t.isBillState(0),expression:"$fxAuth('foodSamplBill.del') && isBillState(0)"}],staticClass:"bottom-btn fx-no-radius",attrs:{type:"danger"},on:{click:t.onDeleteClick}},[t._v("删除")])],1),o("van-popup",{attrs:{position:"bottom"},model:{value:t.datePickerShow,callback:function(e){t.datePickerShow=e},expression:"datePickerShow"}},[o("w-date-picker",{attrs:{visibleFlag:t.datePickerShow,currentDate:t.currentDate},on:{"update:visibleFlag":function(e){t.datePickerShow=e},"update:visible-flag":function(e){t.datePickerShow=e},confirm:t.dateConfirmhandle}})],1),o("van-popup",{staticClass:"fx-list-popup-300",attrs:{position:"right","lock-scroll":!1},model:{value:t.shopPopShow,callback:function(e){t.shopPopShow=e},expression:"shopPopShow"}},[o("listComp",{attrs:{visibleFlag:t.shopPopShow,data:t.shopList,loadFinished:t.shopListLoadFinished,loading:t.onShopLoading,title:"机构检索"},on:{"update:visibleFlag":function(e){t.shopPopShow=e},"update:visible-flag":function(e){t.shopPopShow=e},"update:loading":function(e){t.onShopLoading=e},"on-search":t.searchShop,"on-select":t.selectShop,"on-load":t.onShopLoad}})],1),o("van-popup",{staticClass:"fx-list-popup-300",attrs:{position:"right","lock-scroll":!1},model:{value:t.mealsPopShow,callback:function(e){t.mealsPopShow=e},expression:"mealsPopShow"}},[o("listComp",{attrs:{visibleFlag:t.mealsPopShow,data:t.mealsList,loadFinished:t.mealsListLoadFinished,loading:t.onMealsLoading,title:"餐别检索"},on:{"update:visibleFlag":function(e){t.mealsPopShow=e},"update:visible-flag":function(e){t.mealsPopShow=e},"update:loading":function(e){t.onMealsLoading=e},"on-search":t.searchMeals,"on-select":t.selectMeals,"on-load":t.onMealsLoad}})],1),o("van-popup",{staticClass:"fx-list-popup-300",attrs:{position:"right","lock-scroll":!1},model:{value:t.chefPopShow,callback:function(e){t.chefPopShow=e},expression:"chefPopShow"}},[o("listComp",{attrs:{visibleFlag:t.chefPopShow,data:t.chefList,loadFinished:t.chefListLoadFinished,loading:t.onChefLoading,title:"厨师检索"},on:{"update:visibleFlag":function(e){t.chefPopShow=e},"update:visible-flag":function(e){t.chefPopShow=e},"update:loading":function(e){t.onChefLoading=e},"on-search":t.searchChef,"on-select":t.selectChef,"on-load":t.onChefLoad}})],1),o("van-popup",{staticClass:"fx-list-popup-full",attrs:{position:"right","close-on-click-overlay":!1,"lock-scroll":!1},model:{value:t.itemPopShow,callback:function(e){t.itemPopShow=e},expression:"itemPopShow"}},[o("itemEditComp",{attrs:{visibleFlag:t.itemPopShow,shopId:t.orderInfoData.shopDTO&&t.orderInfoData.shopDTO.id},on:{"update:visibleFlag":function(e){t.itemPopShow=e},"update:visible-flag":function(e){t.itemPopShow=e},"on-confirm":t.onItemEditConfirm}})],1),o("van-actionsheet",{attrs:{actions:t.uploadActions,"cancel-text":"取消"},on:{select:t.onUploadSelect},model:{value:t.uploadActionShow,callback:function(e){t.uploadActionShow=e},expression:"uploadActionShow"}})],1)},n=[],i=(o("7f7f"),o("96cf"),o("3b8d")),s=o("75fc"),r=o("795b"),l=o.n(r),c=(o("6762"),o("2fdb"),o("6b54"),o("cebc")),h=o("2f62"),d=o("f6bb"),f=o("75f3"),u=50,p={name:"foodSamplesDetails",components:{listComp:d["a"],itemEditComp:f["a"]},data:function(){return{query:this.$route.query,leftOptions:{showBackBtn:!0,preventGoBack:!0},orderInfoData:{},datePickerShow:!1,currentDate:"",shopPopShow:!1,shopList:[],shopListStart:0,onShopLoading:!1,shopListLoadFinished:!1,mealsPopShow:!1,mealsList:[],mealsListStart:0,onMealsLoading:!1,mealsListLoadFinished:!1,chefPopShow:!1,chefList:[],chefListStart:0,onChefLoading:!1,chefListLoadFinished:!1,itemPopShow:!1,uploadActionShow:!1,uploadActions:[{id:0,name:"拍摄"},{id:1,name:"从手机相册选择"}]}},created:function(){this.createOrderDetails()},computed:Object(c["a"])({},Object(h["c"])({loginerShopId:function(t){return t.loginer.loginerShopId},loginerId:function(t){return t.loginer.loginerId},sysPointSize:"sysPointSize",numberLength:"numberLength",maxAmount:"maxAmount"}),{formatterDate:function(t){var e=this;return function(t){return"number"===typeof t?e.$fxUtils.setDateTime(new Date(t),"时分"):""}},isBillState:function(t){var e=this;return function(t){return"[object Array]"===Object.prototype.toString.call(t)?t.includes(e.orderInfoData.billState):e.orderInfoData.billState===t}},imgSrc:function(){return this.orderInfoData.base64Str?this.orderInfoData.base64Str:this.orderInfoData.annexUrl}}),methods:{createOrderDetails:function(){var t=this;return new l.a(function(e,o){t.getOrderDetails().then(function(o){t.orderInfoData=o.foodSamples[0],e(t.orderInfoData)}).catch(function(t){return o(t)})})},getOrderDetails:function(){var t=this;return new l.a(function(e){t.$fxHttp.requestPost({url:"".concat(t.$fxBaseApi.url,"/accounts/").concat(t.loginerShopId,"/foodsampls/users/").concat(t.loginerId),data:{billId:t.query.orderId}}).then(function(t){e(t)})})},onFoodDateClick:function(){this.orderInfoData.foodDate&&(this.currentDate=new Date(this.orderInfoData.foodDate)),this.datePickerShow=!0},dateConfirmhandle:function(t){this.orderInfoData.foodDate=t.getTime(),this.datePickerShow=!1},onFoodClick:function(){if(!this.orderInfoData.shopDTO.id)return this.$fxToast.fail("请选择机构!"),!1;this.itemPopShow=!0},changeInfo:function(t){if(this.isBillState(1))return!1;this[t]()},onShopClick:function(){},searchShop:function(t){this.onShopRefresh(t)},selectShop:function(t){if(t.id===this.orderInfoData.shopDTO.id)return!0;this.orderInfoData.shopDTO=t},onShopRefresh:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.shopListStart=0,this.getShopListData(e).then(function(e){t.shopPopShow=!0,t.onShopLoading=!1,t.shopListStart+=u,t.shopListLoadFinished=e.shops.length<u,t.shopList=e.shops})},onShopLoad:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.getShopListData(e).then(function(e){var o;t.onShopLoading=!1,t.shopListStart+=u,t.shopListLoadFinished=e.shops.length<u,(o=t.shopList).push.apply(o,Object(s["a"])(e.shops))})},getShopListData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new l.a(function(o){var a={start:t.shopListStart,size:u,paged:!0,keyword:e,m:"getShopListForUserhouse",billType:"foodSample"};t.$fxHttp.requestGet({url:"".concat(t.$fxBaseApi.url,"/accounts/").concat(t.loginerShopId,"/users/").concat(t.loginerId,"/shops"),data:a}).then(function(t){o(t)})})},onMealsClick:function(){this.onMealsRefresh()},searchMeals:function(t){this.onMealsRefresh(t)},selectMeals:function(t){if(t.id===this.orderInfoData.goodsMealsDTO.id)return!0;this.orderInfoData.goodsMealsDTO=t},onMealsRefresh:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.mealsListStart=0,this.getMealsListData(e).then(function(e){t.mealsPopShow=!0,t.onMealsLoading=!1,t.mealsListStart+=u,t.mealsListLoadFinished=e.goodsMealsDTOData.length<u,t.mealsList=e.goodsMealsDTOData})},onMealsLoad:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.getMealsListData(e).then(function(e){var o;t.onMealsLoading=!1,t.mealsListStart+=u,t.mealsListLoadFinished=e.goodsMealsDTOData.length<u,(o=t.mealsList).push.apply(o,Object(s["a"])(e.goodsMealsDTOData))})},getMealsListData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new l.a(function(o){var a={start:t.mealsListStart,size:u,paged:!0,keyword:e,m:"getMeals"};t.$fxHttp.requestGet({url:"".concat(t.$fxBaseApi.url,"/accounts/food"),data:a}).then(function(t){o(t)})})},onChefClick:function(){if(!this.orderInfoData.shopDTO.id)return this.$fxToast.fail("请选择机构!"),!1;this.onChefRefresh()},searchChef:function(t){this.onChefRefresh(t)},selectChef:function(t){if(t.id===this.orderInfoData.cookDTO.id)return!0;this.orderInfoData.cookDTO=t},onChefRefresh:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.chefListStart=0,this.getChefListData(e).then(function(e){t.chefPopShow=!0,t.onChefLoading=!1,t.chefListStart+=u,t.chefListLoadFinished=e.employeeDTOData.length<u,t.chefList=e.employeeDTOData})},onChefLoad:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.getChefListData(e).then(function(e){var o;t.onChefLoading=!1,t.chefListStart+=u,t.chefListLoadFinished=e.employeeDTOData.length<u,(o=t.chefList).push.apply(o,Object(s["a"])(e.employeeDTOData))})},getChefListData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new l.a(function(o){var a={orgId:t.orderInfoData.shopDTO.id,start:t.chefListStart,size:u,paged:!0,keyword:e,m:"getChef"};t.$fxHttp.requestGet({url:"".concat(t.$fxBaseApi.url,"/accounts/food/shop/").concat(t.loginerShopId,"/users/").concat(t.loginerId),data:a}).then(function(t){o(t)})})},onItemEditConfirm:function(t){this.orderInfoData.foodsDTO=t},onUploadClick:function(){this.uploadActionShow=!0},onUploadSelect:function(t){var e=this;this.uploadActionShow=!1,0===t.id?this.$fxCordova.camera.getPictureByCamera().then(function(t){e.setImgData("data:image/jpeg;base64,"+t)}):this.$fxCordova.camera.getPictureByLibrary().then(function(t){e.setImgData("data:image/jpeg;base64,"+t)})},onDeleteImgClick:function(){this.setImgData(""),this.orderInfoData.delFilename=this.orderInfoData.annexUrl,this.orderInfoData.annexUrl=""},setImgData:function(t){this.orderInfoData.base64Str=t},onClickHandler:function(t){var e=this;this.checkOrderInfo().then(function(){e[t]()})},checkOrderInfo:function(){var t=this;return new l.a(function(e,o){for(var a=[[t.orderInfoData.shopDTO.id,"机构"],[t.orderInfoData.goodsMealsDTO.id,"餐别"],[t.orderInfoData.foodsDTO.id,"菜品"],[t.orderInfoData.cookDTO.id,"厨师"]],n=!0,i=0;i<a.length;i++)if(!a[i][0]){t.$fxToast.top("请选择".concat(a[i][1],"！")),n=!1;break}n&&e()})},onSaveClick:function(){var t=this;this.$dialog.confirm({title:"提示",message:"确定生成单据吗?"}).then(function(){t.saveHandler(t.orderInfoData)}).catch(function(){})},saveHandler:function(t,e){var o=this;return new l.a(function(a,n){o.$fxHttp.requestPut({url:"".concat(o.$fxBaseApi.url,"/accounts/").concat(o.loginerShopId,"/foodsampls/").concat(o.query.orderId,"/users/").concat(o.loginerId," "),data:t,query:{m:"modify"}}).then(function(t){o.createOrderDetails().then(function(t){!e&&o.$fxToast.success("保存成功"),a(t)}).catch(function(t){return n(t)})}).catch(function(t){return n(t)})})},onExpressClick:function(){var t=this;this.$dialog.confirm({title:"提示",message:"确定生成留样吗?"}).then(function(){t.expressHandler(t.orderInfoData)}).catch(function(){})},expressHandler:function(t){var e=this;this.$fxHttp.requestPut({url:"".concat(this.$fxBaseApi.url,"/accounts/").concat(this.loginerShopId,"/foodsampls/").concat(this.query.orderId,"/users/").concat(this.loginerId," "),data:t,query:{m:"editAndProcess"}}).then(function(t){e.createOrderDetails().then(function(){e.$fxToast.success("处理成功")})})},onUnExpressClick:function(){var t=this;this.$dialog.confirm({title:"提示",message:"确定要取消处理该留样吗?"}).then(function(){t.unExpressHandler(t.orderInfoData)}).catch(function(){})},unExpressHandler:function(t){var e=this;this.$fxHttp.requestPut({url:"".concat(this.$fxBaseApi.url,"/accounts/").concat(this.loginerShopId,"/foodsampls/").concat(this.query.orderId,"/users/").concat(this.loginerId," "),data:t,query:{m:"cancelProcess"}}).then(function(t){e.createOrderDetails().then(function(){e.$fxToast.success("取消处理成功")})})},onDeleteClick:function(){var t=this;this.$dialog.confirm({title:"提示",message:"确定要删除该留样吗?"}).then(function(){var e=t.orderInfoData;t.$fxHttp.requestDel({url:"".concat(t.$fxBaseApi.url,"/accounts/").concat(t.loginerShopId,"/foodsampls/").concat(t.query.orderId,"/users/").concat(t.loginerId," "),data:e,query:{userId:t.loginerId}}).then(function(e){t.$fxToast.success("删除成功").then(function(){t.$router.go(-1)})})}).catch(function(){})},onPrintClick:function(){var t=this,e="打印留样将先保存该单据，是否打印?";this.isBillState(1)&&(e="确定打印留样吗？"),this.$dialog.confirm({title:"提示",message:e}).then(function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(o){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!t.isBillState(1)){e.next=5;break}e.t0=t.orderInfoData,e.next=8;break;case 5:return e.next=7,t.saveHandler(t.orderInfoData,"isPrint");case 7:e.t0=e.sent;case 8:a=e.t0,a&&t.printEvent(a),e.next=15;break;case 12:e.prev=12,e.t1=e["catch"](0),t.$fxToast.fail("打印失败");case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()).catch(function(t){return null})},printEvent:function(t){var e=this;this.$fxCordova.sunmiprint("foodResidue",{id:t.sysBillCode,barmsg:"http://".concat(this.$fxGetBaseUrl(),"/ewmapi/").concat(t.id,"/foodSampleInfo"),foodResidueDate:this.formatterDate(t.samplDate),menudate:this.$fxUtils.setDate(new Date(t.foodDate)),itemName:t.foodsDTO&&t.foodsDTO.name,itemChef:t.cookDTO&&t.cookDTO.name,eatTime:t.goodsMealsDTO&&t.goodsMealsDTO.name,foodResidueMember:t.samplerDTO&&t.samplerDTO.name}).then(function(t){e.$fxToast.success("打印成功")})}}},m=p,v=(o("8ceb"),o("2877")),g=Object(v["a"])(m,a,n,!1,null,"ac1262d2",null);e["default"]=g.exports},cf93:function(t,e,o){},d280:function(t,e,o){},d444:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"add-item-class-content fx-vant-class-collapse"},[o("div",{staticClass:"all-class",class:{"is-active":""===t.value},on:{click:function(e){return e.stopPropagation(),t.selectClass("")}}},[t._v(t._s(t.classTitle))]),o("van-collapse",{attrs:{accordion:!0},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},t._l(t.itemClassList,function(e){return o("van-collapse-item",{key:e.id,attrs:{name:e.id}},[o("div",{staticClass:"big-class",attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))]),t._l(e.smallType,function(e){return o("van-cell",{key:e.id,staticClass:"small-class",class:{"is-active":t.value===e.id},attrs:{title:e.name},on:{click:function(o){return o.stopPropagation(),t.selectClass(e.id)}}})})],2)}),1)],1)},n=[],i=(o("c5f6"),{name:"addItemClassList",props:{value:[String,Number],itemClassList:{type:Array,default:function(){return[]}},classTitle:{type:String,default:"全部品项"}},data:function(){return{activeNames:[]}},methods:{selectClass:function(t){this.$emit("input",t),this.$emit("on-select-class",t),this.$emit("on-change-class",[t,this.value])}}}),s=i,r=(o("5402"),o("2877")),l=Object(r["a"])(s,a,n,!1,null,"df69e854",null);e["a"]=l.exports},df72:function(t,e,o){},e247:function(t,e,o){},e515:function(t,e,o){},f6bb:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"shop-popup"},[o("w-header",{attrs:{title:t.title,leftOptions:t.leftOptions},on:{"on-click-back":t.onCloseClick}}),o("van-pro-search",{directives:[{name:"show",rawName:"v-show",value:t.searchShow,expression:"searchShow"}],attrs:{shape:"round"},on:{search:t.search},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}}),o("div",{staticClass:"popup-content"},[o("van-list",{attrs:{finished:t.loadFinished,"finished-text":"没有更多了",error:t.listError,"immediate-check":t.immediateCheck,"error-text":"请求失败，点击重新加载"},on:{"update:error":function(e){t.listError=e},load:t.onLoad},model:{value:t.listLoading,callback:function(e){t.listLoading=e},expression:"listLoading"}},t._l(t.data,function(e){return o("van-cell",{key:e.id,staticClass:"fx-van-cell",attrs:{title:e.name},on:{click:function(o){return t.indexListClick(e)}}})}),1)],1)],1)},n=[],i={name:"filterPop",props:{loading:Boolean,visibleFlag:Boolean,title:String,data:{type:Array,default:function(){return[]}},searchShow:{type:Boolean,default:!0},loadFinished:Boolean,immediateCheck:{type:Boolean,default:!0}},data:function(){return{leftOptions:{showBackBtn:!0,preventGoBack:!0},searchKey:"",listLoading:!1,listError:!1}},watch:{loading:{handler:function(t){t||(this.listLoading=!1)},immediate:!0},visibleFlag:function(t){t&&(this.searchKey="")}},methods:{onCloseClick:function(){this.$emit("update:visibleFlag",!1)},indexListClick:function(t){this.$emit("on-select",t),this.$emit("update:visibleFlag",!1)},search:function(t){this.$emit("on-search",t)},onLoad:function(){this.$emit("update:loading",!0),this.$emit("on-load",this.searchKey||null)}}},s=i,r=(o("8d5d"),o("2877")),l=Object(r["a"])(s,a,n,!1,null,"2a1c11fe",null);e["a"]=l.exports},faf1:function(t,e,o){"use strict";var a=o("cf93"),n=o.n(a);n.a}}]);
//# sourceMappingURL=foodSamples.28d3d2a7.js.map