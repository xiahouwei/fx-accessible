# 云供应链计算公式

# 修改单价

非税金额 = 非税单价 * 数量
含税金额
 |- 价外税 = 非税金额 * (1 + 税率)
 +- 价内税 = 非税金额 / (1 - 税率)
含税单价
 |- 数量非零 = 含税金额 / 数量
 +- 数量为零
	 |- 价外税 = 非税单价 * (1 + 税率)
	 +- 价内税 = 非税单价 / (1 - 税率)
税    额 = 含税金额 - 非税金额


# 修改数量

非税金额 = 非税单价 * 数量
含税金额 = 含税单价 * 数量
税    额 = 含税金额 - 非税金额

# 修改金额

非税单价 = 非税金额 / 数量
含税金额
 |- 价外税 = 非税金额 * (1 + 税率）
 +- 价内税 = 非税金额 / (1 - 税率）
含税单价 = 含税金额 / 数量
税    额 = 含税金额 - 非税金额

# 修改含税金额

含税单价 = 含税金额 / 数量
非税金额
 |- 价外税 = 含税金额 / (1 + 税率）
 +- 价内税 = 含税金额 * (1 - 税率）
非税单价 = 非税金额 / 数量
税    额 = 含税金额 - 非税金额

# 修改含税单价

含税金额 = 含税单价 * 数量
非税金额
 |-价外税 = 含税金额 / (1 + 税率)
 +-价内税 = 含税金额 * (1 - 税率)
非税单价
 |- 数量非零 = 非税金额 / 数量
 +- 数量为零
	 |- 价外税 = 含税单价 / (1 + 税率)
	 +- 价内税 = 含税单价 * (1 - 税率)
税    额 = 含税金额 - 非税金额

# 修改单位
此计算方式为了和云供应链门店自采入库计算规则一致, 改为以下规则

非税单价 = 非税单价 * 新单位换算率 / 旧单位换算率
非税金额 = 非税单价 * 数量
含税单价
	 |- 价外税 = 非税单价 * (1 + 税率)
	 +- 价内税 = 非税单价 / (1 - 税率)
含税金额
	 |- 价外税 = 非税金额 * (1 + 税率）
	 +- 价内税 = 非税金额 / (1 - 税率）
税    额 = 含税金额 - 非税金额


# 修改税率

=> 执行修改单价逻辑